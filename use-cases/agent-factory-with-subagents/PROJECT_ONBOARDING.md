# Как перенести существующий проект в Archon

Эта памятка помогает быстро подключить код из D:\Automation\Development\projects к Archon, чтобы субагенты могли сразу работать с готовой кодовой базой.

## 1. Подготовка
- Убедитесь, что Archon запущен (docker compose up -d в d:\Automation\archon).
- В Knowledge Base импортируйте текущую документацию: README, требования, схемы, файлы настроек (через **Upload** или **Import from URL**).
- Если проект использует приватные репозитории/серверы, настройте соответствующие токены в Integrations.

## 2. Создание проекта Archon
1. Откройте UI Archon → **Projects** → Create Project.
2. Назовите проект так же, как папку или продукт.
3. В описании укажите путь к коду, например D:\Automation\Development\projects\my-app.
4. Сохраните.

## 3. Привязка знаний
1. В карточке проекта перейдите во вкладку **Sources**.
2. Нажмите Link Knowledge и выберите документы, связанные с проектом.
3. Для каждого источника добавьте теги/описание, чтобы субагенты быстрее находили контекст.

## 4. Настройка задач
- При необходимости заранее добавьте первичный backlog (например «Подготовить окружение», «Выпустить релиз»).
- Все описания задач и комментарии пишите на русском языке — субагенты придерживаются этой локали.

## 5. Доступ к файлам
- В Claude Code добавьте MCP-сервер файловой системы и укажите путь D:\Automation\Development\projects.
- Убедитесь, что субагенты получают доступ только к нужным папкам (не давайте доступ к домашним каталогам/секретам).

## 6. Запуск субагентов
1. В Claude Code откройте проект и вызовите rchon-project-manager, указав ID проекта Archon.
2. Менеджер построит план и запустит аналитика, далее — исполнителя, UX-специалиста и стража качества.

## 7. Контроль
- Следите за прогрессом в карточке проекта (вкладки Tasks и Progress).
- Если появляются правки, редактируйте задачи — координатор синхронизации подхватит изменения.

Готово! Теперь субагенты могут работать с существующей кодовой базой без лишних настроек.

## Таблица портов
| Проект | Frontend | Backend/API | Прочее |
| --- | --- | --- | --- |
| Astro | http://localhost:3100 (Next.js) | http://localhost:3101 (Nest API) | PostgreSQL localhost:5544, Redis (по умолчанию) |
| BroastBean Coffee | http://localhost:3001 (CRA dev + prod serve) | REST внутри Next /api | PostgreSQL localhost:5435, NextAuth URL http://localhost:3001 |
| PatternShift | http://localhost:3005 (Vite web) | http://localhost:3004 (Express API) | PostgreSQL localhost:5444, исторический 3006 (legacy) |
| Ecademy | http://localhost:5173 (React UI) | http://localhost:8000 (FastAPI) | — |
| ProjectFlow SaaS | http://localhost:3000 (Next.js) | встроенные API Next | cron/MLM задачи выполняются на том же порту |
| ProjectFlow (legacy) | http://localhost:4200 (Angular) | http://localhost:3333 (Nest) | требуется подтверждение перед запуском |
| Unipark | http://localhost:3030 (Next.js playground) | http://localhost:3031 (API mock) | проверьте docker-compose при старте |

> При добавлении нового проекта выделяйте ближайший свободный блок из 5 портов (например, 3110–3114, 3120–3124) и фиксируйте его в таблице и в заметке Archon.

## Быстрая проверка и освобождение порта
`powershell
# Проверить, занят ли порт
netstat -ano | findstr :3001

# Завершить процесс по PID
Stop-Process -Id <PID> -Force
`

После завершения работы обязательно останавливайте dev-сервера. Иначе при параллельной разработке Claude/субагенты будут занимать всё новые порты и система «зависнет» из-за множества процессов.
