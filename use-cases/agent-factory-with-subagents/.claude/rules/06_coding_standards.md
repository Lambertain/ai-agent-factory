# 06. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏ –∫–æ–¥—É–≤–∞–Ω–Ω—è

## üêç PYTHON CODING STANDARDS

### –ó–∞–≥–∞–ª—å–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏:

- ‚úÖ **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π Python** —è–∫ –æ—Å–Ω–æ–≤–Ω—É –º–æ–≤—É
- ‚úÖ **–°–ª—ñ–¥—É–π PEP8** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç —Å—Ç–∏–ª—é Python
- ‚úÖ **Type hints** - –æ–±–æ–≤'—è–∑–∫–æ–≤–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è
- ‚úÖ **Format –∑ black** - –∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É
- ‚úÖ **Pydantic** –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö
- ‚úÖ **FastAPI** –¥–ª—è API
- ‚úÖ **SQLAlchemy/SQLModel** –¥–ª—è ORM (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

### Docstrings:

**–ü–∏—à–∏ docstrings –¥–ª—è –ö–û–ñ–ù–û–á —Ñ—É–Ω–∫—Ü—ñ—ó** —É —Å—Ç–∏–ª—ñ Google:

```python
def example_function(param1: str, param2: int) -> str:
    """
    –ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å —Ñ—É–Ω–∫—Ü—ñ—ó.

    –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —â–æ —Ä–æ–±–∏—Ç—å —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫ –≤–æ–Ω–∞ –ø—Ä–∞—Ü—é—î
    —Ç–∞ —è–∫—ñ –º–∞—î –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ.

    Args:
        param1 (str): –û–ø–∏—Å –ø–µ—Ä—à–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.
        param2 (int): –û–ø–∏—Å –¥—Ä—É–≥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.

    Returns:
        str: –û–ø–∏—Å —Ç–æ–≥–æ —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—è.

    Raises:
        ValueError: –û–ø–∏—Å —É–º–æ–≤–∏ –∫–æ–ª–∏ –≤–∏–Ω–∏–∫–∞—î –ø–æ–º–∏–ª–∫–∞.

    Examples:
        >>> example_function("test", 42)
        "result"
    """
    pass
```

### Type Hints:

**–ó–ê–í–ñ–î–ò –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Ç–∏–ø—ñ–∑–∞—Ü—ñ—é:**

```python
from typing import List, Dict, Optional, Union
from dataclasses import dataclass

@dataclass
class AgentDependencies:
    """–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∞–≥–µ–Ω—Ç–∞ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é RAG."""

    api_key: str
    project_path: str = ""
    agent_name: str = ""
    knowledge_tags: List[str] = field(default_factory=list)
    knowledge_domain: Optional[str] = None
```

## üíª –ü–†–ê–í–ò–õ–ê –ö–û–î–£–í–ê–ù–ù–Ø

### 1Ô∏è‚É£ –ó–ê–ë–û–†–û–ù–ï–ù–û –í–ò–ö–û–†–ò–°–¢–û–í–£–í–ê–¢–ò:

**‚ùå –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Å–º–∞–π–ª–∏/–µ–º–æ–¥–∑—ñ –≤ Python —Å–∫—Ä–∏–ø—Ç–∞—Ö –∞–±–æ production –∫–æ–¥—ñ**
**‚ùå –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π Unicode —Å–∏–º–≤–æ–ª–∏ –≤ –∫–æ–¥—ñ**
**‚ùå –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –µ–º–æ–¥–∑—ñ –≤ print() —Ñ—É–Ω–∫—Ü—ñ—è—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤**

**–ü–†–ê–í–ò–õ–¨–ù–û:**
```python
# –î–æ–±—Ä–µ - –∑–≤–∏—á–∞–π–Ω–∏–π —Ç–µ–∫—Å—Ç
print("Task completed successfully")
logger.info("Processing started")
```

**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```python
# –ü–æ–≥–∞–Ω–æ - –µ–º–æ–¥–∑—ñ –≤ –∫–æ–¥—ñ
print("‚úÖ Task completed")  # ‚ùå
logger.info("üéØ Processing started")  # ‚ùå
```

### 2Ô∏è‚É£ –ö–û–î–£–í–ê–ù–ù–Ø:

**‚úÖ –ó–ê–í–ñ–î–ò –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π UTF-8 –∫–æ–¥—É–≤–∞–Ω–Ω—è, –ù–ï Unicode —Å–∏–º–≤–æ–ª–∏ –≤ –∫–æ–¥—ñ**
**‚úÖ –í–°–Ü –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ —Ç–∞ —Ä—è–¥–∫–∏ –≤ –∫–æ–¥—ñ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ —Ä–æ—Å—ñ–π—Å—å–∫–æ—é –º–æ–≤–æ—é –≤ UTF-8**

```python
# -*- coding: utf-8 -*-
"""
–ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–≥–µ–Ω—Ç–∞–º–∏ Pydantic AI.

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –∞–≥–µ–Ω—Ç–∞ –∏ –µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.
"""
```

### 3Ô∏è‚É£ –Ü–ù–ö–†–ï–ú–ï–ù–¢–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ò:

**–ù–Ü–ö–û–õ–ò –Ω–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤–µ–ª–∏–∫—ñ —Å–µ–∫—Ü—ñ—ó —Ñ–∞–π–ª—ñ–≤ –∑–∞ —Ä–∞–∑!**

- ‚úÖ –ú–∞–∫—Å–∏–º—É–º 50 —Ä—è–¥–∫—ñ–≤ –∑–∞ –æ–¥–Ω–µ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
- ‚úÖ –ó–∞–≤–∂–¥–∏ —Ä–æ–±–∏—Ç–∏ –º–∞–ª–µ–Ω—å–∫—ñ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏
- ‚úÖ –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –∫–æ–∂–Ω—É –∑–º—ñ–Ω—É –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—É–ø–Ω–æ—é

### 4Ô∏è‚É£ ORGANIZATION –ö–û:

**–ß—ñ—Ç–∫—ñ, —É–∑–≥–æ–¥–∂–µ–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏:**
- –í—ñ–¥–¥–∞–≤–∞–π –ø–µ—Ä–µ–≤–∞–≥—É –≤—ñ–¥–Ω–æ—Å–Ω–∏–º —ñ–º–ø–æ—Ä—Ç–∞–º –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø–∞–∫–µ—Ç—ñ–≤
- –ì—Ä—É–ø—É–π —ñ–º–ø–æ—Ä—Ç–∏: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ ‚Üí —Å—Ç–æ—Ä–æ–Ω–Ω—ñ ‚Üí –ª–æ–∫–∞–ª—å–Ω—ñ
- –°–æ—Ä—Ç—É–π —ñ–º–ø–æ—Ä—Ç–∏ –∞–ª—Ñ–∞–≤—ñ—Ç–Ω–æ –≤ –≥—Ä—É–ø–∞—Ö

```python
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞
import os
import sys
from typing import List, Optional

# –°—Ç–æ—Ä–æ–Ω–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
from pydantic_ai import Agent, RunContext
from pydantic import BaseModel, Field

# –õ–æ–∫–∞–ª—å–Ω—ñ –º–æ–¥—É–ª—ñ
from .settings import load_settings
from .tools import search_tool
```

## üîß ENVIRONMENT VARIABLES

**‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π python-dotenv —Ç–∞ load_env() –¥–ª—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è**

```python
from pydantic_settings import BaseSettings
from pydantic import Field, ConfigDict
from dotenv import load_dotenv

class Settings(BaseSettings):
    """–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–∞ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è."""

    model_config = ConfigDict(
        env_file=".env",
        env_file_encoding="utf-8",
        case_sensitive=False,
        extra="ignore"
    )

    llm_api_key: str = Field(..., description="API-–∫–ª—é—á –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞")
    llm_model: str = Field(default="qwen2.5-coder-32b-instruct")

def load_settings() -> Settings:
    """–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –∑–º—ñ–Ω–Ω–∏—Ö."""
    load_dotenv()
    return Settings()
```

## üß™ TESTING STANDARDS

### Pytest Unit Tests:

**–ó–ê–í–ñ–î–ò —Å—Ç–≤–æ—Ä—é–π Pytest unit tests –¥–ª—è –Ω–æ–≤–∏—Ö —Ñ—ñ—á:**

```python
import pytest
from your_module import your_function

def test_your_function_expected_use():
    """–¢–µ—Å—Ç –æ—á—ñ–∫—É–≤–∞–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è."""
    result = your_function("input")
    assert result == "expected_output"

def test_your_function_edge_case():
    """–¢–µ—Å—Ç –∫—Ä–∞–π–Ω—å–æ–≥–æ –≤–∏–ø–∞–¥–∫—É."""
    result = your_function("")
    assert result is None

def test_your_function_failure_case():
    """–¢–µ—Å—Ç —Å—Ü–µ–Ω–∞—Ä—ñ—é –ø–æ–º–∏–ª–∫–∏."""
    with pytest.raises(ValueError):
        your_function(None)
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤:**
```
/tests
‚îú‚îÄ‚îÄ test_agent.py         # –¢–µ—Å—Ç–∏ –∞–≥–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ test_tools.py         # –¢–µ—Å—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
‚îú‚îÄ‚îÄ test_integration.py   # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ test_validation.py    # –¢–µ—Å—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îî‚îÄ‚îÄ conftest.py           # Pytest –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```

**–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è –¥–ª—è –∫–æ–∂–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó:**
- 1 —Ç–µ—Å—Ç –¥–ª—è –æ—á—ñ–∫—É–≤–∞–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- 1 edge case —Ç–µ—Å—Ç
- 1 failure case —Ç–µ—Å—Ç

## üìù –ö–û–ú–ï–ù–¢–ê–†–Ü –¢–ê –î–û–ö–£–ú–ï–ù–¢–ê–¶–Ü–Ø

### –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤:

**‚úÖ –ö–æ–º–µ–Ω—Ç—É–π –Ω–µ–∑—Ä–æ–∑—É–º—ñ–ª–∏–π –∫–æ–¥**
**‚úÖ –î–æ–¥–∞–≤–∞–π inline `# –ü—Ä–∏—á–∏–Ω–∞:` –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–ª—è —Å–∫–ª–∞–¥–Ω–æ—ó –ª–æ–≥—ñ–∫–∏**
**‚úÖ –ü–æ—è—Å–Ω—é–π –ß–û–ú–£, –∞ –Ω–µ –©–û**

```python
# –ü—Ä–∏—á–∏–Ω–∞: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ batch processing –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó API –≤–∏–∫–ª–∏–∫—ñ–≤
# —Ç–∞ –∑–º–µ–Ω—à–µ–Ω–Ω—è –∑–∞—Ç—Ä–∏–º–∫–∏ –Ω–∞ 50%
results = await batch_process(items)

# –ü—Ä–∏—á–∏–Ω–∞: Gemini Batch API –Ω–∞–¥–∞—î 50% –∑–Ω–∏–∂–∫—É –Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å
if settings.gemini_use_batch_api:
    provider = GeminiBatchProvider()
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è README:

**–û–Ω–æ–≤–ª—é–π README.md –∫–æ–ª–∏:**
- –î–æ–¥–∞—é—Ç—å—Å—è –Ω–æ–≤—ñ —Ñ—ñ—á—ñ
- –ó–º—ñ–Ω—é—é—Ç—å—Å—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- –ú–æ–¥–∏—Ñ—ñ–∫—É—é—Ç—å—Å—è –∫—Ä–æ–∫–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

## üö´ –©–û –£–ù–ò–ö–ê–¢–ò

**–ù–Ü–ö–û–õ–ò –Ω–µ:**
- ‚ùå –í–∏–≥–∞–¥—É–≤–∞–π –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –∞–±–æ —Ñ—É–Ω–∫—Ü—ñ—ó
- ‚ùå –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –Ω–µ–ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ Python –ø–∞–∫–µ—Ç–∏
- ‚ùå –í–∏–¥–∞–ª—è–π –∞–±–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É–π —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ –±–µ–∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
- ‚ùå –°—Ç–≤–æ—Ä—é–π —Ñ–∞–π–ª–∏ –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —á–∏ –≤–æ–Ω–∏ —ñ—Å–Ω—É—é—Ç—å
