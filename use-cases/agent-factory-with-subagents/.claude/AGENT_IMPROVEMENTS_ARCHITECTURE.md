# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∫—Ä–∞—â–µ–Ω—å —Ä–æ–±–æ—Ç–∏ –∞–≥–µ–Ω—Ç—ñ–≤

**–í–µ—Ä—Å—ñ—è:** 1.0
**–î–∞—Ç–∞:** 2025-10-09
**–ê–≤—Ç–æ—Ä:** Archon Blueprint Architect
**–°—Ç–∞—Ç—É—Å:** –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏–π –¥–∏–∑–∞–π–Ω (–≥–æ—Ç–æ–≤–∏–π –¥–æ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó)

---

## üéØ –û–≥–ª—è–¥

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –º—ñ—Å—Ç–∏—Ç—å –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è 6 –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º —Ä–æ–±–æ—Ç–∏ –∞–≥–µ–Ω—Ç—ñ–≤, –≤–∏—è–≤–ª–µ–Ω–∏—Ö —É –ø—Ä–æ—Ü–µ—Å—ñ —Ä–µ–∞–ª—å–Ω–æ—ó –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó —Å–∏—Å—Ç–µ–º–∏.

**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–ò–ô
**–í–ø–ª–∏–≤:** –ü—Ä–æ–±–ª–µ–º–∏ 4, 5, 6 –±–ª–æ–∫—É—é—Ç—å —Ä–æ–∑—Ä–æ–±–∫—É –ø—Ä—è–º–æ –∑–∞—Ä–∞–∑

---

## üìã –ü—Ä–æ–±–ª–µ–º–∞ 1: Archon MCP Integration

### –°–∏–º–ø—Ç–æ–º–∏
- –ê–≥–µ–Ω—Ç–∏ –ø–∏—à—É—Ç—å "Archon –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π" –∑–∞–º—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è MCP tools
- –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≤–±—É–¥–æ–≤–∞–Ω—ñ `mcp__archon__*` —Ñ—É–Ω–∫—Ü—ñ—ó
- –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø–æ—Å—Ç—ñ–π–Ω–∞ –ø—ñ–¥–∫–∞–∑–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–æ MCP tools

### –ö–æ—Ä—ñ–Ω–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
–ê–≥–µ–Ω—Ç–∏ –Ω–µ —Ä–æ–∑—É–º—ñ—é—Ç—å —â–æ Archon MCP Server - —Ü–µ –Ω–µ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π API endpoint, –∞ –≤–±—É–¥–æ–≤–∞–Ω–∏–π MCP tool provider –≤ Claude Code.

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è

#### 1.1 –ß–µ–∫-–ª–∏—Å—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Archon MCP

–î–æ–¥–∞—Ç–∏ –¥–æ `.claude/rules/02_workflow_rules.md`:

```markdown
## üîß –û–ë–û–í'–Ø–ó–ö–û–í–ò–ô –ß–ï–ö-–õ–ò–°–¢: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Archon MCP

### –ü–ï–†–ï–î –±—É–¥—å-—è–∫–∏–º –≤–∏–∫–ª–∏–∫–æ–º Archon:

‚úÖ **–ö–†–û–ö 1: –†–æ–∑—É–º—ñ–Ω–Ω—è MCP Tools**
‚îú‚îÄ Archon MCP Server = –≤–±—É–¥–æ–≤–∞–Ω–∏–π tool provider
‚îú‚îÄ –ù–ï –ø–æ—Ç—Ä—ñ–±–Ω–æ API –∫–ª—é—á—ñ –∞–±–æ endpoints
‚îú‚îÄ –ù–ï –ø–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
‚îî‚îÄ –î–æ—Å—Ç—É–ø–Ω–∏–π –ó–ê–í–ñ–î–ò —É Claude Code

‚úÖ **–ö–†–û–ö 2: –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –≤–∏–∫–ª–∏–∫–∏**
‚îú‚îÄ `mcp__archon__find_tasks()` - –ù–ï HTTP –∑–∞–ø–∏—Ç–∏
‚îú‚îÄ `mcp__archon__manage_task()` - –ù–ï REST API
‚îú‚îÄ `mcp__archon__find_projects()` - –≤–±—É–¥–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è
‚îî‚îÄ –ù–Ü–ö–û–õ–ò –Ω–µ –ø–∏—Å–∞—Ç–∏ "Archon –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π"

‚úÖ **–ö–†–û–ö 3: –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫**
```python
try:
    tasks = await mcp__archon__find_tasks(
        project_id=project_id,
        filter_by="status",
        filter_value="todo"
    )
except Exception as e:
    # –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ - —Ü–µ –±–∞–≥ MCP tools, –ù–ï "–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å"
    print(f"[ERROR] MCP tool error: {e}")
    # –ü–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–æ —Ç–µ—Ö–Ω—ñ—á–Ω—É –ø—Ä–æ–±–ª–µ–º—É
```

### ‚ùå –ó–ê–ë–û–†–û–ù–ï–ù–Ü –§–†–ê–ó–ò:
- "Archon –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π"
- "–ù–µ –º–æ–∂—É –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ Archon"
- "Archon API –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î"
- "–ü–æ—Ç—Ä—ñ–±–µ–Ω API –∫–ª—é—á –¥–ª—è Archon"

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–Ü –§–†–ê–ó–ò:
- "–í–∏–∫–ª–∏–∫–∞—é Archon MCP tool –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–∞–¥–∞—á"
- "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é –≤–±—É–¥–æ–≤–∞–Ω–∏–π mcp__archon__find_tasks()"
- "–û–Ω–æ–≤–ª—é—é —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ Archon MCP"
```

#### 1.2 –ü—Ä–∏–∫–ª–∞–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–î–æ–¥–∞—Ç–∏ –¥–æ CLAUDE.md:

```markdown
## üîß Archon MCP Tools - –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ü–æ—à—É–∫ –∑–∞–¥–∞—á
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è MCP tool
tasks = await mcp__archon__find_tasks(
    project_id="c75ef8e3-6f4d-4da2-9e81-8d38d04a341a",
    filter_by="status",
    filter_value="todo"
)

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å–ø—Ä–æ–±–∞ HTTP –∑–∞–ø–∏—Ç—É
response = await http.get("https://archon-api.com/tasks")  # –ù–ï –†–û–ë–ò–¢–ò!
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
await mcp__archon__manage_task(
    action="update",
    task_id="task-123",
    status="done"
)

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
print("Archon –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π, –Ω–µ –º–æ–∂—É –æ–Ω–æ–≤–∏—Ç–∏ –∑–∞–¥–∞—á—É")  # –ù–ï –†–û–ë–ò–¢–ò!
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
new_task = await mcp__archon__manage_task(
    action="create",
    project_id=project_id,
    title="–ù–æ–≤–∞ –∑–∞–¥–∞—á–∞",
    assignee="Implementation Engineer"
)

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
print("–ü–æ—Ç—Ä—ñ–±–µ–Ω API –∫–ª—é—á –¥–ª—è Archon")  # –ù–ï –†–û–ë–ò–¢–ò!
```
```

### –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–æ–¥–∞–Ω–æ –¥–æ `.claude/rules/02_workflow_rules.md`
- ‚úÖ –ü—Ä–∏–∫–ª–∞–¥–∏ –¥–æ–¥–∞–Ω–æ –¥–æ `CLAUDE.md`
- ‚úÖ –ó–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ —Ñ—Ä–∞–∑–∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ MCP tools

---

## üìã –ü—Ä–æ–±–ª–µ–º–∞ 2: Project Context Loss

### –°–∏–º–ø—Ç–æ–º–∏
- –ü—ñ—Å–ª—è auto-compact –∞–≥–µ–Ω—Ç–∏ –∑–∞–±—É–≤–∞—é—Ç—å project_id
- –®—É–∫–∞—é—Ç—å –∑–∞–¥–∞—á—ñ –≤ —É—Å—ñ—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –∑–∞–º—ñ—Å—Ç—å –ø–æ—Ç–æ—á–Ω–æ–≥–æ
- –ó–∞–¥–∞—á—ñ –Ω–µ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è —ñ "–≤–∏—Å—è—Ç—å" –Ω–µ–≤–∏–∫–æ–Ω–∞–Ω–∏–º–∏

### –ö–æ—Ä—ñ–Ω–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
project_id –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ–π –ø–∞–º'—è—Ç—ñ —Å–µ—Å—ñ—ó. –ü—ñ—Å–ª—è auto-compact –≤—Å—è –ø–∞–º'—è—Ç—å –æ—á–∏—â—É—î—Ç—å—Å—è.

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è

#### 2.1 Project Context Header

–î–æ–¥–∞—Ç–∏ –¥–æ `.claude/rules/02_workflow_rules.md`:

```markdown
## üìå –û–ë–û–í'–Ø–ó–ö–û–í–ò–ô PROJECT CONTEXT HEADER

### –£ –ö–û–ñ–ù–Ü–ô –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∞–≥–µ–Ω—Ç–∞ –ó–ê–í–ñ–î–ò –≤–∫–ª—é—á–∞—Ç–∏:

```markdown
üìå PROJECT CONTEXT: [Project Title] (ID: [project_id])
üé≠ ROLE: [Current Role]
üéØ TASK: [Current Task Title]

---
[–û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ]
---
```

### –ü—Ä–∏–∫–ª–∞–¥:

```markdown
üìå PROJECT CONTEXT: AI Agent Factory (ID: c75ef8e3-6f4d-4da2-9e81-8d38d04a341a)
üé≠ ROLE: Archon Implementation Engineer
üéØ TASK: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Payment Integration Agent

‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤ –∞–≥–µ–Ω—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞
üìã –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏: –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è tools.py
```

### –ê–ª–≥–æ—Ä–∏—Ç–º –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É:

```python
class ProjectContext:
    """
    Singleton –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è project_id –ø—Ä–æ—Ç—è–≥–æ–º —Å–µ—Å—ñ—ó.
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—ñ—Å–ª—è auto-compact.
    """

    _instance = None
    _project_id = None
    _project_title = None

    @classmethod
    def get_instance(cls):
        if cls._instance is None:
            cls._instance = cls()
        return cls._instance

    async def initialize(self, task_id: str):
        """–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑ –∑–∞–¥–∞—á—ñ."""
        task = await mcp__archon__find_tasks(task_id=task_id)
        self._project_id = task["project_id"]

        project = await mcp__archon__find_projects(
            project_id=self._project_id
        )
        self._project_title = project["title"]

        return self.get_header()

    def get_header(self) -> str:
        """–û—Ç—Ä–∏–º–∞—Ç–∏ header –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ."""
        return f"""
üìå PROJECT CONTEXT: {self._project_title} (ID: {self._project_id})
üé≠ ROLE: {current_role}
        """.strip()

    def get_project_id(self) -> str:
        """–û—Ç—Ä–∏–º–∞—Ç–∏ project_id –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó."""
        return self._project_id

    async def recover_after_compact(self):
        """–í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—ñ—Å–ª—è auto-compact."""

        # –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–∞–π—Ç–∏ —á–µ—Ä–µ–∑ doing –∑–∞–¥–∞—á—ñ
        doing_tasks = await mcp__archon__find_tasks(
            filter_by="status",
            filter_value="doing"
        )

        if doing_tasks:
            self._project_id = doing_tasks[0]["project_id"]
            project = await mcp__archon__find_projects(
                project_id=self._project_id
            )
            self._project_title = project["title"]
            return True

        # –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ review –∑–∞–¥–∞—á—ñ
        review_tasks = await mcp__archon__find_tasks(
            filter_by="status",
            filter_value="review"
        )

        if review_tasks:
            self._project_id = review_tasks[0]["project_id"]
            project = await mcp__archon__find_projects(
                project_id=self._project_id
            )
            self._project_title = project["title"]
            return True

        # –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ - –∑–∞–ø–∏—Ç–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        print("‚ö†Ô∏è –í—Ç—Ä–∞—á–µ–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç—É –ø—ñ—Å–ª—è auto-compact")
        print("üìã –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∫–∞–∂—ñ—Ç—å project_id –∞–±–æ –Ω–∞–∑–≤—É –ø—Ä–æ–µ–∫—Ç—É")
        return False


# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É –≤—Å—ñ—Ö –∞–≥–µ–Ω—Ç–∞—Ö:

context = ProjectContext.get_instance()

# –ù–∞ –ø–æ—á–∞—Ç–∫—É –∑–∞–¥–∞—á—ñ
header = await context.initialize(task_id="current-task-id")
print(header)

# –£ –∫–æ–∂–Ω—ñ–π –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
print(context.get_header())

# –ü—Ä–∏ –ø–æ—à—É–∫—É –∑–∞–¥–∞—á
tasks = await mcp__archon__find_tasks(
    project_id=context.get_project_id(),  # ‚úÖ –ó–∞–≤–∂–¥–∏ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏!
    filter_by="status",
    filter_value="todo"
)
```
```

### –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- ‚úÖ Project Context Header —É –∫–æ–∂–Ω—ñ–π –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- ‚úÖ –ö–ª–∞—Å ProjectContext –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- ‚úÖ –ú–µ—Ç–æ–¥ recover_after_compact() –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ –û–±–æ–≤'—è–∑–∫–æ–≤–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ project_id

---

## üìã –ü—Ä–æ–±–ª–µ–º–∞ 3: Auto-Push –¥–ª—è Production

### –°–∏–º–ø—Ç–æ–º–∏
- Production –ø—Ä–æ–µ–∫—Ç–∏ –∑–∞–¥–µ–ø–ª–æ—î–Ω—ñ - –∑–º—ñ–Ω–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—É—à–∏—Ç–∏
- –ê–≥–µ–Ω—Ç –ø—Ä–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–æ–∂–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
- –î–æ–≤–æ–¥–∏—Ç—å—Å—è –∫–æ–∂–µ–Ω —Ä–∞–∑ –Ω–∞–≥–∞–¥—É–≤–∞—Ç–∏ –ø—Ä–æ push

### –ö–æ—Ä—ñ–Ω–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
–ù–µ–º–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —è–∫—ñ –ø—Ä–æ–µ–∫—Ç–∏ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å push.

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è

#### 3.1 Deployment Status –ø–æ–ª–µ

–î–æ–¥–∞—Ç–∏ –¥–æ Archon MCP Server schema –ø–æ–ª–µ `deployment_status`:

```python
# Archon MCP Server - –ø—Ä–æ–µ–∫—Ç schema
{
    "project_id": "uuid",
    "title": "string",
    "description": "string",
    "github_repo": "string",
    "deployment_status": "local | staging | production",  # –ù–û–í–ï –ü–û–õ–ï
    # ... —ñ–Ω—à—ñ –ø–æ–ª—è
}
```

#### 3.2 Auto-push –º–µ—Ö–∞–Ω—ñ–∑–º

–î–æ–¥–∞—Ç–∏ –¥–æ `.claude/rules/05_git_integration.md`:

```markdown
## üöÄ AUTO-PUSH –î–õ–Ø PRODUCTION –ü–†–û–ï–ö–¢–Ü–í

### –û–ë–û–í'–Ø–ó–ö–û–í–ï –ü–†–ê–í–ò–õ–û: –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ deployment_status –ø–µ—Ä–µ–¥ –∫–æ–º–º—ñ—Ç–æ–º

```python
async def commit_and_push_if_production(
    project_id: str,
    commit_message: str
):
    """
    –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º—ñ—Ç —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—à–∏—Ç–∏ —è–∫—â–æ –ø—Ä–æ–µ–∫—Ç production.
    """

    # –ö–†–û–ö 1: –û—Ç—Ä–∏–º–∞—Ç–∏ deployment_status –ø—Ä–æ–µ–∫—Ç—É
    project = await mcp__archon__find_projects(project_id=project_id)
    deployment_status = project.get("deployment_status", "local")

    # –ö–†–û–ö 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º—ñ—Ç (–∑–∞–≤–∂–¥–∏)
    await bash(f"""
        git add . && git commit -m "{commit_message}

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>"
    """)

    # –ö–†–û–ö 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π push –¥–ª—è production
    if deployment_status == "production":
        print("üöÄ [AUTO-PUSH] Production –ø—Ä–æ–µ–∫—Ç - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—É—à—É –∑–º—ñ–Ω–∏...")
        await bash("git push origin main")
        print("‚úÖ [AUTO-PUSH] –ó–º—ñ–Ω–∏ –∑–∞–ø—É—à–µ–Ω—ñ –≤ production")

    elif deployment_status == "staging":
        print("üì¶ [AUTO-PUSH] Staging –ø—Ä–æ–µ–∫—Ç - –ø—É—à—É –≤ staging –≥—ñ–ª–∫—É...")
        await bash("git push origin staging")
        print("‚úÖ [AUTO-PUSH] –ó–º—ñ–Ω–∏ –∑–∞–ø—É—à–µ–Ω—ñ –≤ staging")

    else:  # local
        print("üíæ [LOCAL] –õ–æ–∫–∞–ª—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç - push –ù–ï –ø–æ—Ç—Ä—ñ–±–µ–Ω")
        print("   –ó–º—ñ–Ω–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏")
```

### –í–ò–ö–õ–Æ–ß–ï–ù–ù–Ø: Pattern –∞–≥–µ–Ω—Ç–∏

```python
# Pattern –∞–≥–µ–Ω—Ç–∏ –ù–Ü–ö–û–õ–ò –Ω–µ –ø—É—à–∞—Ç—å—Å—è
PATTERN_AGENTS_PATH = "agent-factory/use-cases/agent-factory-with-subagents/agents/pattern_*"

if matches_pattern(current_path, PATTERN_AGENTS_PATH):
    print("üìù [PATTERN] Pattern –∞–≥–µ–Ω—Ç - –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–∏–º")
    # –¢—ñ–ª—å–∫–∏ –∫–æ–º—ñ—Ç, –ë–ï–ó push
    return
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ git workflow:

```python
# –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ
await commit_and_push_if_production(
    project_id=context.get_project_id(),
    commit_message="feat: –¥–æ–¥–∞–Ω–æ Payment Integration Agent"
)
```
```

### –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- ‚úÖ –ü–æ–ª–µ `deployment_status` –¥–æ–¥–∞–Ω–æ –¥–æ Archon projects
- ‚úÖ –§—É–Ω–∫—Ü—ñ—è `commit_and_push_if_production()` —Å—Ç–≤–æ—Ä–µ–Ω–∞
- ‚úÖ –í–∏–∫–ª—é—á–µ–Ω–Ω—è –¥–ª—è Pattern –∞–≥–µ–Ω—Ç—ñ–≤
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è auto-push workflow

---

## üìã –ü—Ä–æ–±–ª–µ–º–∞ 4: Doing Status Misunderstanding

### –°–∏–º–ø—Ç–æ–º–∏
- –ê–≥–µ–Ω—Ç–∏ —ñ–≥–Ω–æ—Ä—É—é—Ç—å doing –∑–∞–¥–∞—á—ñ —É –Ω–æ–≤—ñ–π —Å–µ—Å—ñ—ó
- –í–≤–∞–∂–∞—é—Ç—å doing = "—Ö—Ç–æ—Å—å –∑–∞—Ä–∞–∑ –ø—Ä–∞—Ü—é—î"
- –ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–æ–±–æ—Ç–∞ –Ω–∞–∫–æ–ø–∏—á—É—î—Ç—å—Å—è

### –ö–æ—Ä—ñ–Ω–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É `doing` = "–Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ –º–∏–Ω—É–ª–æ—ó —Å–µ—Å—ñ—ó".

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è

#### 4.1 –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ –∑–∞–¥–∞—á

–û–Ω–æ–≤–∏—Ç–∏ `.claude/rules/02_workflow_rules.md`:

```markdown
## üî¥ –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ –∑–∞–¥–∞—á

### DOING = –ù–ï–ó–ê–í–ï–†–®–ï–ù–ê –†–û–ë–û–¢–ê (–ù–ï "—Ö—Ç–æ—Å—å –ø—Ä–∞—Ü—é—î!")

```
–ü–†–Ü–û–†–ò–¢–ï–¢ 1: doing (–ù–ê–ô–í–ò–©–ò–ô!)
‚îú‚îÄ –¶–µ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ –º–∏–Ω—É–ª–æ—ó —Å–µ—Å—ñ—ó
‚îú‚îÄ –ú–æ–∂–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ —ñ–Ω—à–∏—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤
‚îî‚îÄ –ó–ê–í–ñ–î–ò –±—Ä–∞—Ç–∏ –ø–µ—Ä—à–æ—é, –ù–ï —ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏!

–ü–†–Ü–û–†–ò–¢–ï–¢ 2: review
‚îú‚îÄ –†–æ–±–æ—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–∞, –ø–æ—Ç—Ä–µ–±—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
‚îú‚îÄ –ú–æ–∂–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–¥–∞—á—ñ
‚îî‚îÄ –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —à–≤–∏–¥–∫–æ, –Ω–µ –Ω–∞–∫–æ–ø–∏—á—É–≤–∞—Ç–∏!

–ü–†–Ü–û–†–ò–¢–ï–¢ 3: todo
‚îî‚îÄ –ù–æ–≤—ñ –∑–∞–¥–∞—á—ñ (—Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –Ω–µ–º–∞—î doing —ñ review)
```

### –§—É–Ω–∫—Ü—ñ—è get_next_task() –∑ –ü–†–ê–í–ò–õ–¨–ù–û–Æ –ª–æ–≥—ñ–∫–æ—é:

```python
async def get_next_task(my_role: str) -> dict:
    """
    –û—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—É –∑–∞–¥–∞—á—É –∑ –ü–†–ê–í–ò–õ–¨–ù–ò–ú –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º.

    –ö–†–ò–¢–ò–ß–ù–û: doing = –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–æ–±–æ—Ç–∞, –ù–ï "—Ö—Ç–æ—Å—å –ø—Ä–∞—Ü—é—î"!
    """

    project_id = ProjectContext.get_instance().get_project_id()

    # –ü–†–Ü–û–†–ò–¢–ï–¢ 1: –ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–æ–±–æ—Ç–∞ (doing) - –ù–ê–ô–í–ò–©–ò–ô!
    doing_tasks = await mcp__archon__find_tasks(
        project_id=project_id,  # –§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –ø—Ä–æ–µ–∫—Ç—É!
        filter_by="status",
        filter_value="doing"
    )
    my_doing = [t for t in doing_tasks if t["assignee"] == my_role]

    if my_doing:
        task = max(my_doing, key=lambda t: t["task_order"])
        print(f"üîÑ –ü–†–Ü–û–†–ò–¢–ï–¢ 1: –ü—Ä–æ–¥–æ–≤–∂—É—é –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω—É: {task['title']}")
        print(f"   –¶—è –∑–∞–¥–∞—á–∞ –∑–∞–ª–∏—à–∏–ª–∞—Å—å –∑ –º–∏–Ω—É–ª–æ—ó —Å–µ—Å—ñ—ó - –∑–∞–≤–µ—Ä—à—É—é —ó—ó!")
        return task

    # –ü–†–Ü–û–†–ò–¢–ï–¢ 2: –ó–∞–¥–∞—á—ñ –Ω–∞ review
    review_tasks = await mcp__archon__find_tasks(
        project_id=project_id,
        filter_by="status",
        filter_value="review"
    )
    my_review = [t for t in review_tasks if t["assignee"] == my_role]

    if my_review:
        task = max(my_review, key=lambda t: t["task_order"])
        print(f"üîç –ü–†–Ü–û–†–ò–¢–ï–¢ 2: –ü–µ—Ä–µ–≤—ñ—Ä—è—é –Ω–∞ review: {task['title']}")
        return task

    # –ü–†–Ü–û–†–ò–¢–ï–¢ 3: –ù–æ–≤—ñ –∑–∞–¥–∞—á—ñ (todo)
    todo_tasks = await mcp__archon__find_tasks(
        project_id=project_id,
        filter_by="status",
        filter_value="todo"
    )
    my_todo = [t for t in todo_tasks if t["assignee"] == my_role]

    if my_todo:
        task = max(my_todo, key=lambda t: t["task_order"])
        print(f"üìã –ü–†–Ü–û–†–ò–¢–ï–¢ 3: –ü–æ—á–∏–Ω–∞—é –Ω–æ–≤—É: {task['title']}")
        return task

    print("‚úÖ –ù–µ–º–∞—î –∑–∞–¥–∞—á –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è")
    return None
```

### –¢–∞–±–ª–∏—Ü—è —Å—Ç–∞—Ç—É—Å—ñ–≤:

| –°—Ç–∞—Ç—É—Å | –ó–Ω–∞—á–µ–Ω–Ω—è | –ö–æ–ª–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ | –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç |
|--------|----------|-------------------|-----------|
| `doing` | –ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ –º–∏–Ω—É–ª–æ—ó —Å–µ—Å—ñ—ó | –ö–æ–ª–∏ –Ω–µ –≤–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –≤ –æ–¥–Ω—ñ–π —Å–µ—Å—ñ—ó | **1 (–ù–∞–π–≤–∏—â–∏–π)** |
| `review` | –ü–æ—Ç—Ä–µ–±—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –µ–∫—Å–ø–µ—Ä—Ç–∞ | –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, –ø–µ—Ä–µ–¥ done | **2** |
| `todo` | –ù–æ–≤–∞ –∑–∞–¥–∞—á–∞, –Ω–µ —Ä–æ–∑–ø–æ—á–∞—Ç–∞ | –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–¥–∞—á—ñ | **3** |
| `done` | –ü–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–∫–æ–Ω–∞–Ω–∞ —ñ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∞ | –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ review | - |
```

### –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- ‚úÖ –§—É–Ω–∫—Ü—ñ—è `get_next_task()` –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- ‚úÖ –¢–∞–±–ª–∏—Ü—è –∑–Ω–∞—á–µ–Ω—å —Å—Ç–∞—Ç—É—Å—ñ–≤
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: doing ‚â† "—Ö—Ç–æ—Å—å –ø—Ä–∞—Ü—é—î"
- ‚úÖ –ü—Ä–∏–∫–ª–∞–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó —ñ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏

---

## üìã –ü—Ä–æ–±–ª–µ–º–∞ 5: Review Accumulation

### –°–∏–º–ø—Ç–æ–º–∏
- Review –∑–∞–¥–∞—á—ñ –Ω–∞–∫–æ–ø–∏—á—É—é—Ç—å—Å—è —ñ –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è
- –ë–ª–æ–∫—É—é—Ç—å –ø–æ–¥–∞–ª—å—à—É —Ä–æ–∑—Ä–æ–±–∫—É
- –ù–µ–º–∞—î –º–µ—Ö–∞–Ω—ñ–∑–º—É –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è

### –ö–æ—Ä—ñ–Ω–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –º–µ—Ö–∞–Ω—ñ–∑–º—É —Å–≤–æ—î—á–∞—Å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ review –∑–∞–¥–∞—á.

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è

#### 5.1 REVIEW-FIRST –º–µ—Ö–∞–Ω—ñ–∑–º

–î–æ–¥–∞—Ç–∏ –¥–æ `.claude/rules/02_workflow_rules.md`:

```markdown
## üîç REVIEW-FIRST –ú–ï–•–ê–ù–Ü–ó–ú

### –û–ë–û–í'–Ø–ó–ö–û–í–ê –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ —Å–µ—Å—ñ—ó:

```python
async def check_review_tasks_on_session_start():
    """
    –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ review –∑–∞–¥–∞—á—ñ –ü–ï–†–ï–î –ø–æ—á–∞—Ç–∫–æ–º –Ω–æ–≤–æ—ó —Ä–æ–±–æ—Ç–∏.

    –í–ò–ö–õ–ò–ö–ê–¢–ò –ó–ê–í–ñ–î–ò –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Å–µ—Å—ñ—ó!
    """

    project_id = ProjectContext.get_instance().get_project_id()

    review_tasks = await mcp__archon__find_tasks(
        project_id=project_id,
        filter_by="status",
        filter_value="review"
    )

    if not review_tasks:
        print("‚úÖ –ù–µ–º–∞—î –∑–∞–¥–∞—á –Ω–∞ review")
        return

    print(f"‚ö†Ô∏è –ó–Ω–∞–π–¥–µ–Ω–æ {len(review_tasks)} –∑–∞–¥–∞—á –Ω–∞ review")
    print("üîç –û–ë–†–û–ë–õ–Ø–Æ REVIEW –ó–ê–î–ê–ß–Ü –ü–ï–†–ï–î –ù–û–í–û–Æ –†–û–ë–û–¢–û–Æ:")

    for task in review_tasks:
        # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –º–æ–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç–∏
        if is_auto_reviewable(task):
            await auto_complete_review(task)
        else:
            await request_human_review(task)


def is_auto_reviewable(task: dict) -> bool:
    """
    –í–∏–∑–Ω–∞—á–∏—Ç–∏ —á–∏ –º–æ–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç–∏ review.

    –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π review –¥–ª—è:
    - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (.md —Ñ–∞–π–ª–∏)
    - –ü—Ä–æ—Å—Ç—ñ —Ñ—ñ–∫—Å–∏ (1-2 —Ñ–∞–π–ª–∏, <50 —Ä—è–¥–∫—ñ–≤)
    - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –∑–º—ñ–Ω–∏ –ª–æ–≥—ñ–∫–∏
    """

    description = task.get("description", "").lower()

    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π review –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
    if "–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è" in description or "readme" in description:
        return True

    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π review –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö —Ñ—ñ–∫—Å—ñ–≤
    if "–ø—Ä–æ—Å—Ç–∏–π —Ñ—ñ–∫—Å" in description or "typo" in description:
        return True

    # –°–∫–ª–∞–¥–Ω—ñ –∑–∞–¥–∞—á—ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å human review
    if "–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞" in description or "—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥" in description:
        return False

    return False


async def auto_complete_review(task: dict):
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç–∏ review –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –∑–∞–¥–∞—á."""

    print(f"‚úÖ [AUTO-REVIEW] {task['title']}")
    print("   –ü—Ä–æ—Å—Ç–∞ –∑–∞–¥–∞—á–∞ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à—É—é review")

    await mcp__archon__manage_task(
        action="update",
        task_id=task["task_id"],
        status="done"
    )


async def request_human_review(task: dict):
    """–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ human review –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–¥–∞—á."""

    import datetime

    created = datetime.datetime.fromisoformat(task["created_at"])
    days_in_review = (datetime.datetime.now() - created).days

    print(f"‚è≥ [HUMAN-REVIEW] {task['title']}")
    print(f"   –í review: {days_in_review} –¥–Ω—ñ–≤")

    # –ï—Å–∫–∞–ª–∞—Ü—ñ—è —è–∫—â–æ >2 –¥–Ω—ñ–≤
    if days_in_review > 2:
        print("üö® [ESCALATION] –ó–∞–¥–∞—á–∞ –≤ review >2 –¥–Ω—ñ–≤ - –µ—Å–∫–∞–ª–∞—Ü—ñ—è!")

        await mcp__archon__manage_task(
            action="create",
            project_id=task["project_id"],
            title=f"‚ö†Ô∏è Review –µ—Å–∫–∞–ª–∞—Ü—ñ—è: {task['title']}",
            description=f"–ó–∞–¥–∞—á–∞ {task['task_id']} –≤ review {days_in_review} –¥–Ω—ñ–≤.\n"
                       f"–ü–æ—Ç—Ä—ñ–±–Ω–∞ –Ω–µ–≥–∞–π–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–±–æ –∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è.",
            assignee="Archon Quality Guardian",
            task_order=100  # –í–∏—Å–æ–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
        )
```

### –ü–†–ê–í–ò–õ–û: Review –ø–µ—Ä–µ–¥ –Ω–æ–≤–æ—é —Ä–æ–±–æ—Ç–æ—é

```
–ï–¢–ê–ü 1: –°–¢–ê–†–¢ –°–ï–°–Ü–á
‚îî‚îÄ –í–∏–∫–ª–∏–∫–∞—Ç–∏ check_review_tasks_on_session_start()

–ï–¢–ê–ü 2: –û–ë–†–û–ë–ö–ê REVIEW
‚îú‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π review –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –∑–∞–¥–∞—á ‚Üí done
‚îú‚îÄ Human review –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö ‚Üí –∑–∞–ª–∏—à–∏—Ç–∏ –≤ review
‚îî‚îÄ –ï—Å–∫–∞–ª–∞—Ü—ñ—è —è–∫—â–æ >2 –¥–Ω—ñ–≤ ‚Üí —Å—Ç–≤–æ—Ä–∏—Ç–∏ escalation –∑–∞–¥–∞—á—É

–ï–¢–ê–ü 3: –¢–Ü–õ–¨–ö–ò –ü–Ü–°–õ–Ø REVIEW
‚îî‚îÄ –ü—Ä–∏—Å—Ç—É–ø–∏—Ç–∏ –¥–æ doing/todo –∑–∞–¥–∞—á
```
```

### –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- ‚úÖ –§—É–Ω–∫—Ü—ñ—è `check_review_tasks_on_session_start()`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π review –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –∑–∞–¥–∞—á
- ‚úÖ –ï—Å–∫–∞–ª–∞—Ü—ñ—è –¥–ª—è –¥–æ–≤–≥–∏—Ö review (>2 –¥–Ω—ñ–≤)
- ‚úÖ –ü—Ä–∞–≤–∏–ª–æ REVIEW-FIRST —É workflow

---

## üìã –ü—Ä–æ–±–ª–µ–º–∞ 6: Random Solutions Without Analysis

### –°–∏–º–ø—Ç–æ–º–∏
- –ê–≥–µ–Ω—Ç –ø—Ä–æ–ø–æ–Ω—É—î —Ä—ñ—à–µ–Ω–Ω—è –±–µ–∑ —á–∏—Ç–∞–Ω–Ω—è git commits
- –°—Ç–≤–æ—Ä—é—î –©–ï –ë–Ü–õ–¨–®–ï –ø–æ–º–∏–ª–æ–∫
- –î–æ–≤–æ–¥–∏—Ç—å—Å—è –≤–∏–ø—Ä–∞–≤–ª—è—Ç–∏ —É 2 —Ä–∞–∑–∏ –±—ñ–ª—å—à–µ

### –ö–æ—Ä—ñ–Ω–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –æ–±–æ–≤'—è–∑–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É –∞–Ω–∞–ª—ñ–∑—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –ø–µ—Ä–µ–¥ —Ä—ñ—à–µ–Ω–Ω—è–º.

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è

#### 6.1 –ü—Ä–æ—Ç–æ–∫–æ–ª analyze_problem_context

–°—Ç–≤–æ—Ä–∏—Ç–∏ `.claude/rules/09_problem_analysis_protocol.md`:

```markdown
# 09. –ü—Ä–æ—Ç–æ–∫–æ–ª –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ–±–ª–µ–º

## üö® –ö–†–ê–°–ù–ê –õ–Ü–ù–Ü–Ø: –ù–Ü –û–î–ù–û–ì–û –†–Ü–®–ï–ù–ù–Ø –ë–ï–ó –ê–ù–ê–õ–Ü–ó–£ –ö–û–ù–¢–ï–ö–°–¢–£

### –û–ë–û–í'–Ø–ó–ö–û–í–ê –ü–û–°–õ–Ü–î–û–í–ù–Ü–°–¢–¨ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

```
–ï–¢–ê–ü 0: –û–¢–†–ò–ú–ê–ù–ù–Ø –ü–†–û–ë–õ–ï–ú–ò
‚îî‚îÄ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ –ø—Ä–æ–±–ª–µ–º—É/–ø–æ–º–∏–ª–∫—É

–ï–¢–ê–ü 1: –ê–ù–ê–õ–Ü–ó –ö–û–ù–¢–ï–ö–°–¢–£ (–û–ë–û–í'–Ø–ó–ö–û–í–û!)
‚îú‚îÄ git log --oneline -20 ‚Üí —â–æ —Ä–æ–±–∏–ª–æ—Å—å –Ω–µ—â–æ–¥–∞–≤–Ω–æ
‚îú‚îÄ git log --grep="–∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞" ‚Üí —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –∫–æ–º—ñ—Ç–∏
‚îú‚îÄ git show [commit] ‚Üí —â–æ —Å–∞–º–µ –∑–º—ñ–Ω–∏–ª–æ—Å—å
‚îú‚îÄ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó/—Å—Ö–µ–º–∏/–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
‚îî‚îÄ –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ –∑–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏

–ï–¢–ê–ü 2: –ó–Ü–°–¢–ê–í–õ–ï–ù–ù–Ø –ó –ü–û–ú–ò–õ–ö–û–Æ
‚îú‚îÄ –Ø–∫—ñ –∑–º—ñ–Ω–∏ –º–æ–≥–ª–∏ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É
‚îú‚îÄ –©–æ –£–ñ–ï –∑—Ä–æ–±–ª–µ–Ω–æ (–Ω–µ –ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ!)
‚îî‚îÄ –Ø–∫—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑–∞—á–µ–ø–ª–µ–Ω—ñ

–ï–¢–ê–ü 3: –§–û–†–ú–£–í–ê–ù–ù–Ø –ì–Ü–ü–û–¢–ï–ó–ò
‚îú‚îÄ –ù–∞ –æ—Å–Ω–æ–≤—ñ –†–ï–ê–õ–¨–ù–ò–• –¥–∞–Ω–∏—Ö (–Ω–µ –∑–¥–æ–≥–∞–¥–æ–∫!)
‚îú‚îÄ –ó –≤–∫–∞–∑—É–≤–∞–Ω–Ω—è–º confidence level (LOW/MEDIUM/HIGH)
‚îî‚îÄ –ó –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º –ß–û–ú–£ —Ç–∞–∫ –≤–≤–∞–∂–∞—î—à

–ï–¢–ê–ü 4: –¢–Ü–õ–¨–ö–ò –ü–û–¢–Ü–ú –†–Ü–®–ï–ù–ù–Ø
‚îî‚îÄ –ó–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è –∑ –æ–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è–º
```

### –§—É–Ω–∫—Ü—ñ—è analyze_problem_context:

```python
from typing import Dict, List
from enum import Enum

class ConfidenceLevel(Enum):
    LOW = "LOW"
    MEDIUM = "MEDIUM"
    HIGH = "HIGH"


async def analyze_problem_context(
    problem_description: str,
    project_id: str
) -> Dict:
    """
    –û–ë–û–í'–Ø–ó–ö–û–í–ò–ô –ø—Ä–æ—Ç–æ–∫–æ–ª –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ–±–ª–µ–º–∏ –ü–ï–†–ï–î —Ä—ñ—à–µ–Ω–Ω—è–º.

    ‚ö†Ô∏è –ó–ê–ë–û–†–û–ù–ï–ù–û –ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è –ë–ï–ó —Ü—å–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É!

    Args:
        problem_description: –û–ø–∏—Å –ø—Ä–æ–±–ª–µ–º–∏ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        project_id: ID –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

    Returns:
        Dict –∑ –∞–Ω–∞–ª—ñ–∑–æ–º: commits, changes, root_cause, solution, confidence
    """

    print("üîç –®–ê–ì 1: –ß–ò–¢–ê–Æ –û–°–¢–ê–ù–ù–Ü –ö–û–ú–Ü–¢–ò")
    print("=" * 60)

    # 1. –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ 20 –∫–æ–º—ñ—Ç—ñ–≤
    commits_output = await bash("git log --oneline -20")
    print(f"–û—Å—Ç–∞–Ω–Ω—ñ –∫–æ–º—ñ—Ç–∏:\n{commits_output}\n")

    # 2. –ó–Ω–∞–π—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –∫–æ–º—ñ—Ç–∏ (–∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ –∑ –ø—Ä–æ–±–ª–µ–º–∏)
    keywords = extract_keywords(problem_description)
    print(f"–ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞: {', '.join(keywords)}")

    relevant_commits = []
    for keyword in keywords:
        grep_result = await bash(
            f"git log --grep='{keyword}' --oneline -20"
        )
        if grep_result:
            relevant_commits.extend(grep_result.split('\n'))

    relevant_commits = list(set(relevant_commits))  # –£–Ω—ñ–∫–∞–ª—å–Ω—ñ
    print(f"–ó–Ω–∞–π–¥–µ–Ω–æ {len(relevant_commits)} —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö –∫–æ–º—ñ—Ç—ñ–≤")

    print("\nüîç –®–ê–ì 2: –ê–ù–ê–õ–Ü–ó–£–Æ –†–ï–õ–ï–í–ê–ù–¢–ù–Ü –ó–ú–Ü–ù–ò")
    print("=" * 60)

    # 3. –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å diff –æ—Å—Ç–∞–Ω–Ω—ñ—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö –∫–æ–º—ñ—Ç—ñ–≤
    changes_analysis = []
    for commit_line in relevant_commits[:5]:  # –ü–µ—Ä—à—ñ 5
        commit_hash = commit_line.split()[0]
        diff = await bash(f"git show {commit_hash}")

        print(f"\n–ö–æ–º—ñ—Ç {commit_hash}:")
        print(diff[:500] + "...\n")  # –ü–µ—Ä—à—ñ 500 —Å–∏–º–≤–æ–ª—ñ–≤

        changes_analysis.append({
            "commit": commit_hash,
            "diff": diff
        })

    print("\nüîç –®–ê–ì 3: –ü–ï–†–ï–í–Ü–†–Ø–Æ –©–û –£–ñ–ï –ó–†–û–ë–õ–ï–ù–û")
    print("=" * 60)

    # 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó
    try:
        migrations = await bash("ls -la prisma/migrations/")
        print(f"–ú—ñ–≥—Ä–∞—Ü—ñ—ó:\n{migrations}\n")
    except:
        print("–ú—ñ–≥—Ä–∞—Ü—ñ—ó –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ –∞–±–æ –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è\n")
        migrations = None

    # 5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ö–µ–º—É –ë–î
    try:
        schema = await read_file("prisma/schema.prisma")
        print(f"–°—Ö–µ–º–∞ –ë–î (–ø–µ—Ä—à—ñ 500 —Å–∏–º–≤–æ–ª—ñ–≤):\n{schema[:500]}...\n")
    except:
        print("–°—Ö–µ–º–∞ –ë–î –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞\n")
        schema = None

    print("\nüîç –®–ê–ì 4: –ê–ù–ê–õ–Ü–ó–£–Æ –õ–û–ì–ò –ü–û–ú–ò–õ–ö–ò")
    print("=" * 60)

    # 6. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∑–º—ñ–Ω
    error_analysis = analyze_error_with_context(
        error_logs=problem_description,
        recent_changes=changes_analysis,
        db_schema=schema,
        migrations=migrations
    )

    print("\n‚úÖ –®–ê–ì 5: –§–û–†–ú–£–Æ –û–°–ú–ò–°–õ–ï–ù–ï –†–Ü–®–ï–ù–ù–Ø")
    print("=" * 60)
    print(f"–ö–æ—Ä—ñ–Ω–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞: {error_analysis['root_cause']}")
    print(f"–†—ñ—à–µ–Ω–Ω—è: {error_analysis['solution']}")
    print(f"–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å: {error_analysis['confidence'].value}")

    return {
        "commits_analyzed": len(relevant_commits),
        "changes_found": changes_analysis,
        "root_cause": error_analysis["root_cause"],
        "solution": error_analysis["solution"],
        "confidence": error_analysis["confidence"]
    }


def extract_keywords(text: str) -> List[str]:
    """–í–∏–ª—É—á–∏—Ç–∏ –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ –∑ –æ–ø–∏—Å—É –ø—Ä–æ–±–ª–µ–º–∏."""

    # –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞
    stop_words = {"the", "a", "an", "and", "or", "but", "in", "on", "at"}

    words = text.lower().split()
    keywords = [w for w in words if w not in stop_words and len(w) > 3]

    return keywords[:5]  # –¢–æ–ø-5


def analyze_error_with_context(
    error_logs: str,
    recent_changes: List[Dict],
    db_schema: str,
    migrations: str
) -> Dict:
    """
    –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–º—ñ–Ω.

    Returns:
        Dict: {
            "root_cause": str,
            "solution": str,
            "confidence": ConfidenceLevel
        }
    """

    # –ü—Ä–∏–∫–ª–∞–¥ –ª–æ–≥—ñ–∫–∏ –∞–Ω–∞–ª—ñ–∑—É
    if "relation" in error_logs and "does not exist" in error_logs:
        # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —Ç–∞–±–ª–∏—Ü—è —î –≤ —Å—Ö–µ–º—ñ
        table_name = extract_table_name(error_logs)

        if db_schema and table_name.lower() in db_schema.lower():
            # –¢–∞–±–ª–∏—Ü—è –Ñ –≤ —Å—Ö–µ–º—ñ - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–ø–∏—Ç—ñ
            return {
                "root_cause": f"–¢–∞–±–ª–∏—Ü—è {table_name} —ñ—Å–Ω—É—î –≤ schema.prisma, "
                             f"–∞–ª–µ –∑–∞–ø–∏—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å",
                "solution": "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ raw SQL –∑–∞–ø–∏—Ç–∏ - –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ Prisma query",
                "confidence": ConfidenceLevel.HIGH
            }
        else:
            # –¢–∞–±–ª–∏—Ü—ñ –ù–ï–ú–ê–Ñ - –ø—Ä–æ–±–ª–µ–º–∞ –∑ –º—ñ–≥—Ä–∞—Ü—ñ—î—é
            return {
                "root_cause": f"–¢–∞–±–ª–∏—Ü—è {table_name} –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞ –≤ schema.prisma",
                "solution": "–î–æ–¥–∞—Ç–∏ model –¥–æ schema.prisma —Ç–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é",
                "confidence": ConfidenceLevel.MEDIUM
            }

    # –ó–∞–≥–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
    return {
        "root_cause": "–ü–æ—Ç—Ä–µ–±—É—î –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –ª–æ–≥—ñ–≤",
        "solution": "–î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∞",
        "confidence": ConfidenceLevel.LOW
    }


def extract_table_name(error_text: str) -> str:
    """–í–∏–ª—É—á–∏—Ç–∏ –Ω–∞–∑–≤—É —Ç–∞–±–ª–∏—Ü—ñ –∑ –ø–æ–º–∏–ª–∫–∏."""
    import re
    match = re.search(r'relation "([^"]+)"', error_text)
    return match.group(1) if match else "unknown"
```

### ‚ùå –ó–ê–ë–û–†–û–ù–ï–ù–Ü –§–†–ê–ó–ò (–≥–æ–≤–æ—Ä—è—Ç—å –ø—Ä–æ –∑–¥–æ–≥–∞–¥–∫–∏):

- "–í–µ—Ä–æ—è—Ç–Ω–æ —Ç–∞–±–ª–∏—Ü—è –Ω–µ —ñ—Å–Ω—É—î"
- "–°—Ö–æ–∂–µ –º—ñ–≥—Ä–∞—Ü—ñ—è –Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–ª–∞—Å—å"
- "–ú–æ–∂–ª–∏–≤–æ —Å—Ö–µ–º–∞ –Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–∞"
- "–°–∫–æ—Ä—ñ—à–µ –∑–∞ –≤—Å–µ –ø—Ä–æ–±–ª–µ–º–∞ –≤..."

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–Ü –§–†–ê–ó–ò (–≥–æ–≤–æ—Ä—è—Ç—å –ø—Ä–æ –∞–Ω–∞–ª—ñ–∑):

- "–ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞–≤ –∫–æ–º—ñ—Ç X, –¥–µ –¥–æ–¥–∞–ª–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª Y"
- "–í diff –±–∞—á—É —â–æ –∑–º—ñ–Ω–∏–ª–∏ –∑–∞–ø–∏—Ç Z"
- "–ú—ñ–≥—Ä–∞—Ü—ñ—è –≤–∂–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞ (–¥–∏–≤. –∫–æ–º—ñ—Ç ABC)"
- "–°—Ö–µ–º–∞ –º—ñ—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—é users (–ø–µ—Ä–µ–≤—ñ—Ä–∏–≤ schema.prisma)"
- "–†–µ–∞–ª—å–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä—è–¥–∫—É N —Ñ–∞–π–ª—É M (–¥–∏–≤. git show)"

### –ü—Ä–∏–∫–ª–∞–¥ –ü–†–ê–í–ò–õ–¨–ù–û–ì–û –∞–Ω–∞–ª—ñ–∑—É:

```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: "–ü–æ–º–∏–ª–∫–∞: relation users does not exist"

–ê–≥–µ–Ω—Ç:
"üîç –ê–Ω–∞–ª—ñ–∑—É—é –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º–∏...

–®–ê–ì 1: –ß–∏—Ç–∞—é –æ—Å—Ç–∞–Ω–Ω—ñ –∫–æ–º—ñ—Ç–∏
- –ö–æ–º—ñ—Ç abc123: 'add delete invite link feature'
- –ö–æ–º—ñ—Ç def456: 'fix owner account missing'

–®–ê–ì 2: –ê–Ω–∞–ª—ñ–∑—É—é –∑–º—ñ–Ω–∏
git show abc123:
- –î–æ–¥–∞–Ω–æ –∑–∞–ø–∏—Ç DELETE FROM invites WHERE...
- –ó–º—ñ–Ω–µ–Ω–æ –∑–∞–ø–∏—Ç SELECT owner FROM accounts...

–®–ê–ì 3: –ü–µ—Ä–µ–≤—ñ—Ä—è—é –º—ñ–≥—Ä–∞—Ü—ñ—ó
- –ú—ñ–≥—Ä–∞—Ü—ñ—è 20250109_create_users –£–ñ–ï –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞
- schema.prisma –ú–Ü–°–¢–ò–¢–¨ model User

–®–ê–ì 4: –†–µ–∞–ª—å–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞
–í –∫–æ–º—ñ—Ç—ñ abc123 –≤ —Ñ–∞–π–ª—ñ invites.service.ts:12
–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑–∞–ø–∏—Ç:
  SELECT * FROM public.users
–ê–ª–µ –≤ Prisma –ø–æ—Ç—Ä—ñ–±–Ω–æ:
  prisma.user.findMany()

–†–Ü–®–ï–ù–ù–Ø: –í–∏–ø—Ä–∞–≤–∏—Ç–∏ raw SQL –∑–∞–ø–∏—Ç –Ω–∞ Prisma query
CONFIDENCE: HIGH (–±–∞—á—É —Ç–æ—á–Ω–∏–π —Ä—è–¥–æ–∫ –≤ diff)"
```
```

### –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- ‚úÖ –§—É–Ω–∫—Ü—ñ—è `analyze_problem_context()` —Å—Ç–≤–æ—Ä–µ–Ω–∞
- ‚úÖ –ö–†–ê–°–ù–ê –õ–Ü–ù–Ü–Ø: –ù–Ü –û–î–ù–û–ì–û —Ä—ñ—à–µ–Ω–Ω—è –±–µ–∑ –∞–Ω–∞–ª—ñ–∑—É
- ‚úÖ –û–±–æ–≤'—è–∑–∫–æ–≤–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å: –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚Üí –∞–Ω–∞–ª—ñ–∑ ‚Üí –≥—ñ–ø–æ—Ç–µ–∑–∞ ‚Üí —Ä—ñ—à–µ–Ω–Ω—è
- ‚úÖ –°–ø–∏—Å–æ–∫ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏—Ö —Ñ—Ä–∞–∑ (–≥–æ–≤–æ—Ä—è—Ç—å –ø—Ä–æ –∑–¥–æ–≥–∞–¥–∫–∏)
- ‚úÖ –ü—Ä–∏–∫–ª–∞–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É
- ‚úÖ Confidence level –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è

---

## üìä –ü—Ä—ñ–æ—Ä–∏—Ç–∏–∑–∞—Ü—ñ—è –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è

### –§–∞–∑–∞ 1: –ö–†–ò–¢–ò–ß–ù–Ü (–≤–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ –ù–ï–ì–ê–ô–ù–û)
1. **–ü—Ä–æ–±–ª–µ–º–∞ 6** - –ü—Ä–æ—Ç–æ–∫–æ–ª –∞–Ω–∞–ª—ñ–∑—É (–±–ª–æ–∫—É—î —è–∫—ñ—Å—Ç—å —Ä—ñ—à–µ–Ω—å)
2. **–ü—Ä–æ–±–ª–µ–º–∞ 4** - Doing —Å—Ç–∞—Ç—É—Å (–Ω–∞–∫–æ–ø–∏—á—É—î—Ç—å—Å—è –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–æ–±–æ—Ç–∞)
3. **–ü—Ä–æ–±–ª–µ–º–∞ 5** - Review –º–µ—Ö–∞–Ω—ñ–∑–º (–±–ª–æ–∫—É—î —Ä–æ–∑—Ä–æ–±–∫—É)

### –§–∞–∑–∞ 2: –í–ê–ñ–õ–ò–í–Ü (–≤–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ –ø—Ä–æ—Ç—è–≥–æ–º —Ç–∏–∂–Ω—è)
4. **–ü—Ä–æ–±–ª–µ–º–∞ 2** - Project context (–≤—Ç—Ä–∞—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –ø—ñ—Å–ª—è compact)
5. **–ü—Ä–æ–±–ª–µ–º–∞ 1** - Archon MCP (–ø–æ—Å—Ç—ñ–π–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å)

### –§–∞–∑–∞ 3: –ü–û–ö–†–ê–©–ï–ù–ù–Ø (–≤–ø—Ä–æ–≤–∞–¥–∏—Ç–∏ –ø—Ä–æ—Ç—è–≥–æ–º –º—ñ—Å—è—Ü—è)
6. **–ü—Ä–æ–±–ª–µ–º–∞ 3** - Auto-push (—Ä—É—á–Ω–∞ —Ä–æ–±–æ—Ç–∞, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞)

---

## üéØ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É

### –ü—ñ—Å–ª—è –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –æ—á—ñ–∫—É—î–º–æ:

**–ü—Ä–æ–±–ª–µ–º–∞ 1 (Archon MCP):**
- ‚úÖ 0% –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å "Archon –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π"
- ‚úÖ 100% –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è MCP tools –∑–∞–º—ñ—Å—Ç—å HTTP –∑–∞–ø–∏—Ç—ñ–≤

**–ü—Ä–æ–±–ª–µ–º–∞ 2 (Project Context):**
- ‚úÖ 0% –≤—Ç—Ä–∞—Ç project_id –ø—ñ—Å–ª—è auto-compact
- ‚úÖ 100% –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∑ project context header

**–ü—Ä–æ–±–ª–µ–º–∞ 3 (Auto-Push):**
- ‚úÖ 0% –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å –ø—Ä–æ push –¥–ª—è production
- ‚úÖ 100% –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö –ø—É—à—ñ–≤ –ø—ñ—Å–ª—è –∫–æ–º–º—ñ—Ç—ñ–≤

**–ü—Ä–æ–±–ª–µ–º–∞ 4 (Doing Status):**
- ‚úÖ 0% —ñ–≥–Ω–æ—Ä—É–≤–∞–Ω—å doing –∑–∞–¥–∞—á
- ‚úÖ 100% doing –∑–∞–¥–∞—á –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –ø–µ—Ä—à–∏–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞ 5 (Review):**
- ‚úÖ <1 –¥–Ω—è —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –≤ review
- ‚úÖ 0% –∑–∞–¥–∞—á –≤ review >2 –¥–Ω—ñ–≤

**–ü—Ä–æ–±–ª–µ–º–∞ 6 (Analysis):**
- ‚úÖ 100% —Ä—ñ—à–µ–Ω—å –∑ –∞–Ω–∞–ª—ñ–∑–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- ‚úÖ 0% —Ä—ñ—à–µ–Ω—å "–Ω–∞ –∑–¥–æ–≥–∞–¥–∫—É"
- ‚úÖ >80% —Ä—ñ—à–µ–Ω—å –∑ confidence HIGH

---

## üìù –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

### –î–ª—è Implementation Engineer:

1. –û–Ω–æ–≤–∏—Ç–∏ `.claude/rules/02_workflow_rules.md` –∑ —Ä—ñ—à–µ–Ω–Ω—è–º–∏ 1, 2, 4, 5
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ `.claude/rules/09_problem_analysis_protocol.md` –∑ —Ä—ñ—à–µ–Ω–Ω—è–º 6
3. –û–Ω–æ–≤–∏—Ç–∏ `.claude/rules/05_git_integration.md` –∑ —Ä—ñ—à–µ–Ω–Ω—è–º 3
4. –û–Ω–æ–≤–∏—Ç–∏ `CLAUDE.md` –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ —Ç–∞ —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏
5. –°—Ç–≤–æ—Ä–∏—Ç–∏ utility —Ñ—É–Ω–∫—Ü—ñ—ó:
   - `ProjectContext` class
   - `analyze_problem_context()`
   - `commit_and_push_if_production()`
   - `check_review_tasks_on_session_start()`
6. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ –∑–º—ñ–Ω–∏ –≤ —Ä–µ–∞–ª—å–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—è—Ö
7. –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤

---

**–ê–≤—Ç–æ—Ä:** Archon Blueprint Architect
**–î–∞—Ç–∞:** 2025-10-09
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó
