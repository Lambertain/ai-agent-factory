# Module 07: Refactoring Workflow

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-10-16
**–ê–≤—Ç–æ—Ä:** Archon Blueprint Architect

**–ù–∞–∑–∞–¥ –∫:** [Project Manager Knowledge Base](../archon_project_manager_knowledge.md)

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ò–ì–ì–ï–†–´ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –∑–∞–¥–∞—á Archon)

**–ö–æ–≥–¥–∞ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —á–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å:**
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö knowledge base –º–æ–¥—É–ª–µ–π
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ best practices –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö –∫ –º–æ–¥—É–ª—å–Ω—ã–º knowledge bases

---

## üîç –ö–õ–Æ–ß–ï–í–´–ï –°–õ–û–í–ê (–¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)

**–†—É—Å—Å–∫–∏–µ:** —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤, –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∑–Ω–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞, —Ç—Ä–∏–≥–≥–µ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏, —á–µ–∫-–ª–∏—Å—Ç

**English:** refactoring, token optimization, modular architecture, agent knowledge, loading triggers, checklist

---

## üìå –ö–û–ì–î–ê –ß–ò–¢–ê–¢–¨ (–∫–æ–Ω—Ç–µ–∫—Å—Ç)

- –ü–ª–∞–Ω–∏—Ä—É–µ—à—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ knowledge base –ª—é–±–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–≥–µ–Ω—Ç —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- –ó–∞–¥–∞—á–∞: "–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –∞–≥–µ–Ω—Ç–∞"
- –ó–∞–¥–∞—á–∞: "—Å–¥–µ–ª–∞—Ç—å –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∑–Ω–∞–Ω–∏–π"
- –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π

---

## üìã –ß–ï–ö–õ–ò–°–¢ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê AGENT KNOWLEDGE BASE

### –≠–¢–ê–ü 1: –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑

```python
async def analyze_current_knowledge_base(agent_name: str):
    """
    –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∞–≥–µ–Ω—Ç–∞.

    Returns:
        dict: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    """

    # 1. –ò–∑–º–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    current_file = f"{agent_name}_knowledge.md"
    total_lines = count_lines(current_file)
    estimated_tokens = total_lines * 30  # –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

    print(f"üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï: {agent_name}")
    print(f"üìÑ –°—Ç—Ä–æ–∫: {total_lines}")
    print(f"üî¢ –¢–æ–∫–µ–Ω–æ–≤ (–æ—Ü–µ–Ω–∫–∞): {estimated_tokens}")

    # 2. –°–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –í–°–ï–• –ø—Ä–∞–≤–∏–ª
    all_rules = extract_all_rules(current_file)
    print(f"üìã –ü—Ä–∞–≤–∏–ª –≤—Å–µ–≥–æ: {len(all_rules)}")

    # 3. –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞
    categories = categorize_rules(all_rules)
    for category, count in categories.items():
        print(f"  - {category}: {count} –ø—Ä–∞–≤–∏–ª")

    # 4. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    usage_frequency = analyze_usage_frequency(categories)
    print(f"\nüî• –¢–û–ü-5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:")
    for i, (category, frequency) in enumerate(usage_frequency[:5], 1):
        print(f"  {i}. {category}: {frequency}%")

    # 5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–æ–¥—É–ª—è–º
    recommended_modules = recommend_module_structure(categories, usage_frequency)
    print(f"\nüí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å {len(recommended_modules)} –º–æ–¥—É–ª–µ–π")

    return {
        "total_lines": total_lines,
        "estimated_tokens": estimated_tokens,
        "total_rules": len(all_rules),
        "categories": categories,
        "top_categories": usage_frequency[:5],
        "recommended_modules": recommended_modules
    }
```

### –≠–¢–ê–ü 2: –°–æ–∑–¥–∞–Ω–∏–µ ultra-compact core

**–¶–µ–ª—å:** –°–æ–∫—Ä–∞—Ç–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –¥–æ 150-300 —Å—Ç—Ä–æ–∫

```markdown
# [Agent Name] - Knowledge Base

**–í–µ—Ä—Å–∏—è:** 2.0
**–î–∞—Ç–∞:** [YYYY-MM-DD]

## üî• TOP-10 –ö–†–ò–¢–ò–ß–ù–´–• –ü–†–ê–í–ò–õ (–¥–ª—è 90% –∑–∞–¥–∞—á)

### 1. [–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ]
[–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å –ø—Ä–∏–º–µ—Ä–æ–º –∫–æ–¥–∞]

### 2. [–í—Ç–æ—Ä–æ–µ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏]
[–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å –ø—Ä–∏–º–µ—Ä–æ–º –∫–æ–¥–∞]

[... 8 more critical rules ...]

## üìñ MODULE INDEX

| –ú–æ–¥—É–ª—å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –î–æ–º–µ–Ω | –ö–æ–≥–¥–∞ —á–∏—Ç–∞—Ç—å | –°—Ç—Ä–æ–∫ |
|--------|-----------|-------|--------------|-------|
| [01](modules/01_...) | üî¥ | [Domain] | [Trigger] | ~200 |
| [02](modules/02_...) | üü° | [Domain] | [Trigger] | ~200 |
[...]

**–õ–µ–≥–µ–Ω–¥–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:**
- üî¥ CRITICAL - —á–∏—Ç–∞–π –í–°–ï–ì–î–ê
- üü° HIGH - —á–∏—Ç–∞–π —á–∞—Å—Ç–æ
- üü¢ MEDIUM - —á–∏—Ç–∞–π –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

### –≠–¢–ê–ü 3: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π —Å —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è:**

```markdown
# Module [NN]: [Module Name]

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** [YYYY-MM-DD]
**–ê–≤—Ç–æ—Ä:** [Agent Role]

**–ù–∞–∑–∞–¥ –∫:** [Main Knowledge Base](../[agent]_knowledge.md)

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ò–ì–ì–ï–†–´ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –∑–∞–¥–∞—á Archon)

**–ö–æ–≥–¥–∞ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —á–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å:**
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è 1] (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–û—à–∏–±–∫–∞ 'No such tool available'")
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è 2]
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è 3]
- [–û–ø–µ—Ä–∞—Ü–∏—è X —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏–π –∏–∑ –º–æ–¥—É–ª—è]

---

## üîç –ö–õ–Æ–ß–ï–í–´–ï –°–õ–û–í–ê (–¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)

**–†—É—Å—Å–∫–∏–µ:** [—Å–ª–æ–≤–æ1], [—Å–ª–æ–≤–æ2], [—Å–ª–æ–≤–æ3], ...

**English:** [word1], [word2], [word3], ...

---

## üìå –ö–û–ì–î–ê –ß–ò–¢–ê–¢–¨ (–∫–æ–Ω—Ç–µ–∫—Å—Ç)

- [–ü—Ä–æ—Å—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ 1]
- [–ü—Ä–æ—Å—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ 2]
- [–ü—Ä–æ—Å—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ 3]

---

## [–û–°–ù–û–í–ù–û–ï –°–û–î–ï–†–ñ–ê–ù–ò–ï –ú–û–î–£–õ–Ø]

[–ü—Ä–∞–≤–∏–ª–∞, –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞, best practices –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞]

---

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- [‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–æ–¥—É–ª—å: [Name]](0[N-1]_[name].md)
- [‚Üë –ù–∞–∑–∞–¥ –∫ [Agent] Knowledge Base](../[agent]_knowledge.md)
- [‚Üí –°–ª–µ–¥—É—é—â–∏–π –º–æ–¥—É–ª—å: [Name]](0[N+1]_[name].md)
```

### –≠–¢–ê–ü 4: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ç—ã

```python
async def validate_refactoring_completeness(agent_name: str):
    """
    –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –í–°–ï –ø—Ä–∞–≤–∏–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞.

    Returns:
        bool: True –µ—Å–ª–∏ –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
    """

    # 1. –ò–∑–≤–ª–µ—á—å –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ OLD —Ñ–∞–π–ª–∞
    old_file = f"{agent_name}_knowledge_OLD_[date].md"
    old_rules = extract_all_rules(old_file)

    # 2. –ò–∑–≤–ª–µ—á—å –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ –ù–û–í–´–• —Ñ–∞–π–ª–æ–≤ (core + modules)
    core_file = f"{agent_name}_knowledge.md"
    core_rules = extract_all_rules(core_file)

    module_rules = []
    for module_file in glob("modules/*.md"):
        module_rules.extend(extract_all_rules(module_file))

    new_rules = core_rules + module_rules

    # 3. –°—Ä–∞–≤–Ω–∏—Ç—å
    print(f"üìä –í–ê–õ–ò–î–ê–¶–ò–Ø –ü–û–õ–ù–û–¢–´ –ü–†–ê–í–ò–õ")
    print(f"üìÑ –ë—ã–ª–æ –ø—Ä–∞–≤–∏–ª: {len(old_rules)}")
    print(f"üìÑ –°—Ç–∞–ª–æ –ø—Ä–∞–≤–∏–ª: {len(new_rules)}")

    if len(new_rules) < len(old_rules):
        missing = set(old_rules) - set(new_rules)
        print(f"‚ùå –ü–û–¢–ï–†–Ø–ù–û –ü–†–ê–í–ò–õ: {len(missing)}")
        for rule in missing:
            print(f"  - {rule}")
        return False

    print(f"‚úÖ –í–°–ï –ü–†–ê–í–ò–õ–ê –°–û–•–†–ê–ù–ï–ù–´!")
    return True
```

### –≠–¢–ê–ü 5: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.

```python
async def validate_trigger_system(agent_name: str):
    """
    –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π.

    Returns:
        dict: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –º–æ–¥—É–ª—é
    """

    results = {}

    for module_file in glob("modules/*.md"):
        module_name = extract_module_name(module_file)

        # 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç—Ä—ë—Ö —Ç–∏–ø–æ–≤ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
        has_technical = check_section_exists(module_file, "–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ò–ì–ì–ï–†–´")
        has_keywords = check_section_exists(module_file, "–ö–õ–Æ–ß–ï–í–´–ï –°–õ–û–í–ê")
        has_context = check_section_exists(module_file, "–ö–û–ì–î–ê –ß–ò–¢–ê–¢–¨")

        # 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
        technical_count = count_trigger_items(module_file, "–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ò–ì–ì–ï–†–´")
        keyword_count = count_keywords(module_file)
        context_count = count_trigger_items(module_file, "–ö–û–ì–î–ê –ß–ò–¢–ê–¢–¨")

        # 3. –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
        quality_score = 0
        if has_technical and technical_count >= 3:
            quality_score += 40
        if has_keywords and keyword_count >= 5:
            quality_score += 30
        if has_context and context_count >= 3:
            quality_score += 30

        results[module_name] = {
            "has_all_sections": has_technical and has_keywords and has_context,
            "technical_triggers": technical_count,
            "keywords": keyword_count,
            "context_triggers": context_count,
            "quality_score": quality_score,
            "status": "‚úÖ –û–¢–õ–ò–ß–ù–û" if quality_score >= 90 else "‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –î–û–†–ê–ë–û–¢–ö–ò"
        }

    # 4. –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    print(f"üìä –í–ê–õ–ò–î–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ –¢–†–ò–ì–ì–ï–†–û–í")
    print(f"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    for module, stats in results.items():
        print(f"\n{module}:")
        print(f"  –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã: {stats['technical_triggers']}")
        print(f"  –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: {stats['keywords']}")
        print(f"  –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã: {stats['context_triggers']}")
        print(f"  –ö–∞—á–µ—Å—Ç–≤–æ: {stats['quality_score']}/100 - {stats['status']}")

    return results
```

---

## üéØ BEST PRACTICES –ú–û–î–£–õ–¨–ù–û–ô –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### –†–∞–∑–º–µ—Ä—ã –º–æ–¥—É–ª–µ–π

```
–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –†–ê–ó–ú–ï–†–´:
‚îú‚îÄ Core file: 150-300 —Å—Ç—Ä–æ–∫
‚îú‚îÄ Critical modules (üî¥): 200-300 —Å—Ç—Ä–æ–∫
‚îú‚îÄ High priority (üü°): 150-250 —Å—Ç—Ä–æ–∫
‚îî‚îÄ Medium priority (üü¢): 100-200 —Å—Ç—Ä–æ–∫

–ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ï –†–ê–ó–ú–ï–†–´:
‚îú‚îÄ Core file: 400 —Å—Ç—Ä–æ–∫
‚îî‚îÄ –õ—é–±–æ–π –º–æ–¥—É–ª—å: 500 —Å—Ç—Ä–æ–∫
```

### –¢—Ä–∏ —É—Ä–æ–≤–Ω—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

1. **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ò–ì–ì–ï–†–´** - –î–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º
   - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `"–û—à–∏–±–∫–∞ 'No such tool available'"`)
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `"–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏"`)
   - API –≤—ã–∑–æ–≤—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: `"mcp__archon__find_projects() failed"`)

2. **–ö–õ–Æ–ß–ï–í–´–ï –°–õ–û–í–ê** - –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - –†—É—Å—Å–∫–∏–µ + English –≤–µ—Ä—Å–∏–∏
   - –ú–∏–Ω–∏–º—É–º 5-10 —Å–ª–æ–≤
   - –ü–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω –º–æ–¥—É–ª—è

3. **–ö–û–ù–¢–ï–ö–°–¢** - –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º
   - "–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ..." –æ–ø–∏—Å–∞–Ω–∏—è
   - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏
   - –ë–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

```markdown
**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- [‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–æ–¥—É–ª—å: Task Management](03_task_management.md)
- [‚Üë –ù–∞–∑–∞–¥ –∫ Project Manager Knowledge Base](../archon_project_manager_knowledge.md)
- [‚Üí –°–ª–µ–¥—É—é—â–∏–π –º–æ–¥—É–ª—å: Context Recovery](05_context_recovery.md)
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–®–ù–û–ô –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:

```
‚úÖ –£–°–ü–ï–®–ù–´–ô –†–ï–§–ê–ö–¢–û–†–ò–ù–ì:
‚îú‚îÄ –°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª: 100% (–Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω–æ)
‚îú‚îÄ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π: 5-10 (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ 7)
‚îú‚îÄ Core file: ‚â§300 —Å—Ç—Ä–æ–∫
‚îú‚îÄ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å: ‚â§500 —Å—Ç—Ä–æ–∫
‚îî‚îÄ –¢—Ä–∏–≥–≥–µ—Ä—ã: 3 —Ç–∏–ø–∞ –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ

üìä –ü–†–ò–ú–ï–†–´ –£–°–ü–ï–®–ù–´–• –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–û–í:
‚îú‚îÄ Blueprint Architect: 1693 ‚Üí 280 —Å—Ç—Ä–æ–∫
‚îî‚îÄ Project Manager: 1135 ‚Üí 280 —Å—Ç—Ä–æ–∫
```

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

```python
def calculate_optimization_percentage(old_lines: int, new_core_lines: int) -> float:
    """
    –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ core —Ñ–∞–π–ª–∞.

    Args:
        old_lines: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ —Å—Ç–∞—Ä–æ–º –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–º —Ñ–∞–π–ª–µ
        new_core_lines: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ –Ω–æ–≤–æ–º core —Ñ–∞–π–ª–µ

    Returns:
        float: –ü—Ä–æ—Ü–µ–Ω—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    """
    reduction = old_lines - new_core_lines
    optimization_percent = (reduction / old_lines) * 100
    return round(optimization_percent, 1)

# –ü—Ä–∏–º–µ—Ä:
optimization = calculate_optimization_percentage(1135, 280)
# ‚Üí 75.3%
```

---

## üîÑ MIGRATION GUIDE TEMPLATE

**–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—Ç—å MIGRATION_GUIDE.md:**

```markdown
# Migration Guide: [Agent Name] Knowledge Base

**–í–µ—Ä—Å–∏—è:** OLD ‚Üí 2.0
**–î–∞—Ç–∞:** [YYYY-MM-DD]
**–ê–≤—Ç–æ—Ä:** [Agent Role]

## üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –ú–µ—Ç—Ä–∏–∫–∏:
- **–ë—ã–ª–æ:** [N] —Å—Ç—Ä–æ–∫
- **–°—Ç–∞–ª–æ:** [K] —Å—Ç—Ä–æ–∫ (core file)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **–ë—ã–ª–æ:** 1 –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª
- **–°—Ç–∞–ª–æ:** 1 core + [N] –º–æ–¥—É–ª–µ–π

## üìñ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞—Ä–æ–≥–æ ‚Üí –Ω–æ–≤–æ–≥–æ

| –°—Ç–∞—Ä—ã–π —Ä–∞–∑–¥–µ–ª | –ù–æ–≤–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ |
|--------------|-------------------|
| [Old Section 1] | Core: Section [N] |
| [Old Section 2] | Module 01: [Name] |
| [Old Section 3] | Module 02: [Name] |
[...]

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

1. **–í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–π —Å core —Ñ–∞–π–ª–∞** - —Å–æ–¥–µ—Ä–∂–∏—Ç –¢–û–ü-10 –ø—Ä–∞–≤–∏–ª
2. **–ß–∏—Ç–∞–π –º–æ–¥—É–ª–∏ –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å–∫–∞–∂–µ—Ç
3. **–ò—Å–ø–æ–ª—å–∑—É–π –Ω–∞–≤–∏–≥–∞—Ü–∏—é** - –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫–∏

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

- [–°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç—Ä–µ–±—É—é—â–∏—Ö –≤–Ω–∏–º–∞–Ω–∏—è]
- [Breaking changes –µ—Å–ª–∏ –µ—Å—Ç—å]

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å core file
- [ ] –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å MODULE INDEX
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å Module 01 (–∫—Ä–∏—Ç–∏—á–Ω—ã–π)
- [ ] –ü–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ [Agent Role] –∏–ª–∏ —á–∏—Ç–∞–π—Ç–µ
Module 07: Refactoring Workflow –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ—Ü–µ—Å—Å–∞.
```

---

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- [‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–æ–¥—É–ª—å: Examples & Templates](06_examples_templates.md)
- [‚Üë –ù–∞–∑–∞–¥ –∫ Project Manager Knowledge Base](../archon_project_manager_knowledge.md)
