# Module 08: Agent Refactoring Check

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-10-17
**–ê–≤—Ç–æ—Ä:** Blueprint Architect

**–ù–∞–∑–∞–¥ –∫:** [Project Manager Knowledge Base](../archon_project_manager_knowledge.md)

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ò–ì–ì–ï–†–´ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –∑–∞–¥–∞—á Archon)

**–ö–æ–≥–¥–∞ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —á–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å:**
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–æ–ª—å –ª—é–±–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ü–ï–†–ï–î –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º)
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∞–≥–µ–Ω—Ç–æ–≤
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –∞–≥–µ–Ω—Ç–∞–º–∏ –∏–∑ –§–∞–∑—ã 1.2 (35 –∞–≥–µ–Ω—Ç–æ–≤)
- –û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω-—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—ã
- –í—ã–±–æ—Ä –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

---

## üîç –ö–õ–Æ–ß–ï–í–´–ï –°–õ–û–í–ê (–¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)

**–†—É—Å—Å–∫–∏–µ:** —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç–∞, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤, –º–æ–¥—É–ª—å–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≥–µ–Ω—Ç–∞, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞, —á–µ–∫–ª–∏—Å—Ç –∞–≥–µ–Ω—Ç–æ–≤, —Ñ–∞–∑–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞, ultra-compact core

**English:** agent refactoring, token optimization, modular knowledge base, agent check, refactoring status, agent checklist, refactoring phase, ultra-compact core

---

## üìå –ö–û–ì–î–ê –ß–ò–¢–ê–¢–¨ (–∫–æ–Ω—Ç–µ–∫—Å—Ç)

- –ü–ª–∞–Ω–∏—Ä—É–µ—à—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ä–æ–ª—å –¥—Ä—É–≥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω –ª–∏ –∞–≥–µ–Ω—Ç
- –•–æ—á–µ—à—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç–∞
- –í–∏–¥–∏—à—å —á—Ç–æ –∞–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç >35K —Ç–æ–∫–µ–Ω–æ–≤ (–ø—Ä–∏–∑–Ω–∞–∫ –Ω–µ—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞)
- –ù—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç–æ–≤ —É–∂–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ
- –ó–∞–¥–∞—á–∞: "–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∞–≥–µ–Ω—Ç–æ–≤"

---

## üö® –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ü–†–ê–í–ò–õ–û: –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ü–ï–†–ï–î –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞ —Ä–æ–ª—å

### –ê–õ–ì–û–†–ò–¢–ú –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ô –ü–†–û–í–ï–†–ö–ò

**–ö–ê–ñ–î–´–ô –†–ê–ó –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞ —Ä–æ–ª—å –∞–≥–µ–Ω—Ç–∞:**

```python
async def check_agent_refactoring_before_role_switch(agent_name: str) -> dict:
    """
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∞–≥–µ–Ω—Ç–∞ –ü–ï–†–ï–î –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º.

    Args:
        agent_name: –ù–∞–∑–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Payment Integration Agent")

    Returns:
        dict: –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
    """

    # –®–ê–ì 1: –ü—Ä–æ—á–∏—Ç–∞—Ç—å AGENTS_REFACTORING_CHECKLIST.md
    checklist_path = "D:\\Automation\\agent-factory\\use-cases\\agent-factory-with-subagents\\agents\\archon_project_manager\\knowledge\\AGENTS_REFACTORING_CHECKLIST.md"
    checklist_content = Read(checklist_path)

    # –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∞–≥–µ–Ω—Ç–∞ –≤ —á–µ–∫–ª–∏—Å—Ç–µ
    if f"[x] **{agent_name}**" in checklist_content:
        # –ê–≥–µ–Ω—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω ‚úÖ
        print(f"‚úÖ {agent_name} - –†–ï–§–ê–ö–¢–û–†–ï–ù")
        print(f"üìä –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞ —Ä–æ–ª—å –±–µ–∑ –æ–ø–∞—Å–µ–Ω–∏–π")
        return {"refactored": True, "action": "proceed"}

    elif f"[ ] {agent_name}" in checklist_content:
        # –ê–≥–µ–Ω—Ç –ù–ï —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω ‚ùå
        print(f"‚ö†Ô∏è {agent_name} - –ù–ï –†–ï–§–ê–ö–¢–û–†–ï–ù")
        print(f"üìä –û—Ü–µ–Ω–∫–∞: ~35K —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)")
        print(f"")
        print(f"üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥")
        print(f"üí° –®–∞–±–ª–æ–Ω –∑–∞–¥–∞—á–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —ç—Ç–æ–º –º–æ–¥—É–ª–µ (—Å–º. –Ω–∏–∂–µ)")
        print(f"")

        # –®–ê–ì 3: –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
        print(f"‚ùì –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ {agent_name}? (–¥–∞/–Ω–µ—Ç)")
        print(f"   ‚Üí –ï—Å–ª–∏ '–¥–∞': —Å–æ–∑–¥–∞–º –∑–∞–¥–∞—á—É –ø–æ —à–∞–±–ª–æ–Ω—É")
        print(f"   ‚Üí –ï—Å–ª–∏ '–Ω–µ—Ç': –ø—Ä–æ–¥–æ–ª–∂—É —Å –Ω–µ—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã–º –∞–≥–µ–Ω—Ç–æ–º (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)")

        return {"refactored": False, "action": "ask_user"}

    else:
        # –ê–≥–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —á–µ–∫–ª–∏—Å—Ç–µ
        print(f"‚ö†Ô∏è {agent_name} - –ù–ï –ù–ê–ô–î–ï–ù –≤ —á–µ–∫–ª–∏—Å—Ç–µ")
        print(f"üí° –í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –Ω–æ–≤—ã–π –∞–≥–µ–Ω—Ç –∏–ª–∏ –æ—à–∏–±–∫–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏")
        return {"refactored": "unknown", "action": "manual_check"}
```

---

## üìã –ü–†–ò–ó–ù–ê–ö–ò –†–ï–§–ê–ö–¢–û–†–ï–ù–ù–û–ì–û –ê–ì–ï–ù–¢–ê

### ‚úÖ –ê–≥–µ–Ω—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω –ï–°–õ–ò:

1. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ knowledge base:**
   ```
   agents/[agent_name]/knowledge/
   ‚îú‚îÄ‚îÄ [agent_name]_knowledge.md           # Core file (150-300 —Å—Ç—Ä–æ–∫)
   ‚îú‚îÄ‚îÄ modules/
   ‚îÇ   ‚îú‚îÄ‚îÄ 01_[–Ω–∞–∑–≤–∞–Ω–∏–µ].md
   ‚îÇ   ‚îú‚îÄ‚îÄ 02_[–Ω–∞–∑–≤–∞–Ω–∏–µ].md
   ‚îÇ   ‚îî‚îÄ‚îÄ ...
   ‚îî‚îÄ‚îÄ MIGRATION_GUIDE.md                  # –ì–∏–¥ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
   ```

2. **Ultra-compact core file:**
   - –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª: ‚â§300 —Å—Ç—Ä–æ–∫
   - –°–æ–¥–µ—Ä–∂–∏—Ç: TOP-10 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª + MODULE INDEX
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: ~1,500-2,000 —Ç–æ–∫–µ–Ω–æ–≤ (–≤–º–µ—Å—Ç–æ 35,000)

3. **–ú–æ–¥—É–ª–∏ —Å —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏:**
   - –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å: 150-500 —Å—Ç—Ä–æ–∫
   - 3 —Ç–∏–ø–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –∫–æ–Ω—Ç–µ–∫—Å—Ç
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

4. **–û—Ç–º–µ—Ç–∫–∞ –≤ AGENTS_REFACTORING_CHECKLIST.md:**
   - `[x] **[Agent Name]** - 2025-10-XX`

### ‚ùå –ê–≥–µ–Ω—Ç –ù–ï —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω –ï–°–õ–ò:

1. **–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª:**
   - –û–¥–∏–Ω —Ñ–∞–π–ª: 800-1,693+ —Å—Ç—Ä–æ–∫
   - –ù–µ—Ç –ø–∞–ø–∫–∏ `modules/`
   - –ù–µ—Ç MODULE INDEX

2. **–í—ã—Å–æ–∫–∏–π —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤:**
   - ~35,000 —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
   - –ù–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –º–æ–¥—É–ª–∏

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤ —Å–ø–∏—Å–∫–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã—Ö:**
   - `[ ] [Agent Name]` –≤ —á–µ–∫–ª–∏—Å—Ç–µ (–±–µ–∑ –≥–∞–ª–æ—á–∫–∏)

---

## üéØ –®–ê–ë–õ–û–ù –ó–ê–î–ê–ß–ò –ù–ê –†–ï–§–ê–ö–¢–û–†–ò–ù–ì –ê–ì–ï–ù–¢–ê

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–µ—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞:**

```python
async def create_agent_refactoring_task(agent_name: str) -> str:
    """
    –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç–∞ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É.

    Args:
        agent_name: –ù–∞–∑–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

    Returns:
        str: ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏
    """

    task_title = f"–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ {agent_name} —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π —Ç–æ–∫–µ–Ω–æ–≤"

    task_description = f"""## üéØ –¶–µ–ª—å

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞—Ç—å {agent_name} —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É knowledge base.

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- **–§–æ—Ä–º–∞—Ç:** –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª knowledge base
- **–û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–∞:** ~800-1,500 —Å—Ç—Ä–æ–∫
- **–†–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤:** ~35,000 —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- **–°—Ç–∞—Ç—É—Å:** –ù–ï —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω (—Å–º. AGENTS_REFACTORING_CHECKLIST.md)

## üöÄ –¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- **–§–æ—Ä–º–∞—Ç:** Ultra-compact core + –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Core file:** 150-300 —Å—Ç—Ä–æ–∫
- **–ú–æ–¥—É–ª–∏:** 5-7 –º–æ–¥—É–ª–µ–π –ø–æ 150-500 —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥—ã–π
- **–†–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤:** ~1,500-2,000 —Ç–æ–∫–µ–Ω–æ–≤ (95% –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- **–¢—Ä–∏–≥–≥–µ—Ä—ã:** 3 —Ç–∏–ø–∞ –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –∫–æ–Ω—Ç–µ–∫—Å—Ç)

## üìã –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**üö® –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ü–ï–†–ï–î –ù–ê–ß–ê–õ–û–ú –ø—Ä–æ—á–∏—Ç–∞—Ç—å:**
- `agents/archon_project_manager/knowledge/modules/07_refactoring_workflow.md` (–¥–µ—Ç–∞–ª—å–Ω–∏–π –≥—ñ–¥)
- `agents/archon_project_manager/knowledge/AGENTS_REFACTORING_CHECKLIST.md` (—Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç—ñ–≤)

### –≠—Ç–∞–ø 1: –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è (30 –º–∏–Ω)
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—É—â–∏–π {agent_name}_knowledge.md
- [ ] –ò–∑–≤–ª–µ—á—å –í–°–ï –ø—Ä–∞–≤–∏–ª–∞ (—Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫)
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å TOP-10 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (–¥–ª—è 90% –∑–∞–¥–∞—á)

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ ultra-compact core (1 —á–∞—Å)
- [ ] –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π core file (150-300 —Å—Ç—Ä–æ–∫)
- [ ] –í–∫–ª—é—á–∏—Ç—å TOP-10 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª
- [ ] –°–æ–∑–¥–∞—Ç—å MODULE INDEX —Å —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Ä–æ–ª–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∫ –º–æ–¥—É–ª—è–º

### –≠—Ç–∞–ø 3: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π (2-3 —á–∞—Å–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `modules/`
- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ 5-7 –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π
- [ ] –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å: –¥–æ–±–∞–≤–∏—Ç—å 3 —Ç–∏–ø–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å ‚â§500 —Å—Ç—Ä–æ–∫

### –≠—Ç–∞–ø 4: –í–∞–ª–∏–¥–∞—Ü–∏—è (30 –º–∏–Ω)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –í–°–ï –ø—Ä–∞–≤–∏–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (100% –ø–æ–ª–Ω–æ—Ç–∞)
- [ ] –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ (‚â•3 —Ç—Ä–∏–≥–≥–µ—Ä–∞ –Ω–∞ –º–æ–¥—É–ª—å)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é (–≤—Å–µ —Å—Å—ã–ª–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç)
- [ ] –°–æ–∑–¥–∞—Ç—å MIGRATION_GUIDE.md

### –≠—Ç–∞–ø 5: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ (30 –º–∏–Ω)
- [ ] –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª –≤ {agent_name}_knowledge_OLD_[date].md
- [ ] –û–±–Ω–æ–≤–∏—Ç—å AGENTS_REFACTORING_CHECKLIST.md (–¥–æ–±–∞–≤–∏—Ç—å –≥–∞–ª–æ—á–∫—É)
- [ ] Git commit: "refactor({agent_name}): token optimization 95%"
- [ ] Git push

## üìè –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- ‚úÖ Core file: ‚â§300 —Å—Ç—Ä–æ–∫
- ‚úÖ –ú–æ–¥—É–ª–∏: 5-7 —à—Ç—É–∫, –∫–∞–∂–¥—ã–π ‚â§500 —Å—Ç—Ä–æ–∫
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã: 3 —Ç–∏–ø–∞ –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ
- ‚úÖ –ü–æ–ª–Ω–æ—Ç–∞: 100% –ø—Ä–∞–≤–∏–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è: –≤—Å–µ —Å—Å—ã–ª–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ß–µ–∫–ª–∏—Å—Ç: –æ–±–Ω–æ–≤–ª—ë–Ω —Å –≥–∞–ª–æ—á–∫–æ–π

## üéì –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**üìÅ –û–±–æ–≤'—è–∑–∫–æ–≤—ñ —Ñ–∞–π–ª–∏ –¥–ª—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—è:**

1. **–î–µ—Ç–∞–ª—å–Ω–∏–π –≥—ñ–¥ –∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É:**
   - `D:\Automation\agent-factory\use-cases\agent-factory-with-subagents\agents\archon_project_manager\knowledge\modules\07_refactoring_workflow.md`
   - –ú—ñ—Å—Ç–∏—Ç—å: —á–µ–∫-–ª–∏—Å—Ç (5 –µ—Ç–∞–ø—ñ–≤), –≤–∞–ª—ñ–¥–∞—Ü—ñ—é, –º–µ—Ç—Ä–∏–∫–∏

2. **–†–µ—î—Å—Ç—Ä –∞–≥–µ–Ω—Ç—ñ–≤ (–ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω):**
   - `D:\Automation\agent-factory\use-cases\agent-factory-with-subagents\agents\archon_project_manager\knowledge\AGENTS_REFACTORING_CHECKLIST.md`
   - –ú—ñ—Å—Ç–∏—Ç—å: —Å–ø–∏—Å–æ–∫ 37 –∞–≥–µ–Ω—Ç—ñ–≤, –ø—Ä–æ–≥—Ä–µ—Å (2/37 –∑–∞–≤–µ—Ä—à–µ–Ω–æ)

3. **–ü—Ä–∏–∫–ª–∞–¥–∏ —É—Å–ø—ñ—à–Ω–∏—Ö —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—ñ–≤:**
   - `agents/archon_blueprint_architect/knowledge/` - 1693 ‚Üí 317 —Å—Ç—Ä–æ–∫ (94% –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è)
   - `agents/archon_project_manager/knowledge/` - 1135 ‚Üí 279 —Å—Ç—Ä–æ–∫ (94% –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è)

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- **–û–±—â–µ–µ –≤—Ä–µ–º—è:** 4-5 —á–∞—Å–æ–≤
- **–≠—Ç–∞–ø 1:** 30 –º–∏–Ω—É—Ç
- **–≠—Ç–∞–ø 2:** 1 —á–∞—Å
- **–≠—Ç–∞–ø 3:** 2-3 —á–∞—Å–∞
- **–≠—Ç–∞–ø 4:** 30 –º–∏–Ω—É—Ç
- **–≠—Ç–∞–ø 5:** 30 –º–∏–Ω—É—Ç

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- **Assignee:** Blueprint Architect (—ç–∫—Å–ø–µ—Ä—Ç –ø–æ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ)
- **Priority:** task_order = 85-95 (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
"""

    # –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ Archon MCP
    task_id = await mcp__archon__manage_task(
        "create",
        project_id="c75ef8e3-6f4d-4da2-9e81-8d38d04a341a",  # AI Agent Factory
        title=task_title,
        description=task_description,
        assignee="Blueprint Architect",
        task_order=90,
        feature="Token Optimization"
    )

    print(f"‚úÖ –ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞: {task_title}")
    print(f"üìã Task ID: {task_id}")

    return task_id
```

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê (–¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

```
üìä –ü–†–û–ì–†–ï–°–° –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê –ê–ì–ï–ù–¢–û–í:
‚îú‚îÄ –í—Å–µ–≥–æ –∞–≥–µ–Ω—Ç–æ–≤: 37
‚îú‚îÄ –†–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ: 2 ‚úÖ‚úÖ
‚îî‚îÄ –û—Å—Ç–∞–ª–æ—Å—å: 35

–§–ê–ó–ê 1.1 (–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã): 2/2 ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê!
‚îú‚îÄ [x] archon_blueprint_architect - 2025-10-16
‚îÇ   ‚îî‚îÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: 1693 ‚Üí 317 —Å—Ç—Ä–æ–∫ (94%)
‚îî‚îÄ [x] archon_project_manager - 2025-10-16
    ‚îî‚îÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: 1135 ‚Üí 279 —Å—Ç—Ä–æ–∫ (94%)

–§–ê–ó–ê 1.2 (–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã): 0/35 (0%)
‚îú‚îÄ Archon Core Agents: 3 –∞–≥–µ–Ω—Ç–∞
‚îú‚îÄ Universal Development Agents: 14 –∞–≥–µ–Ω—Ç–æ–≤
‚îî‚îÄ Pattern Agents: 18 –∞–≥–µ–Ω—Ç–æ–≤
```

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

```
‚úÖ –£–°–ü–ï–®–ù–´–ô –†–ï–§–ê–ö–¢–û–†–ò–ù–ì:
‚îú‚îÄ Core file: ‚â§300 —Å—Ç—Ä–æ–∫ (—Ü–µ–ª—å: 150-300)
‚îú‚îÄ –ú–æ–¥—É–ª–∏: 5-10 —à—Ç—É–∫ (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ: 7)
‚îú‚îÄ –¢—Ä–∏–≥–≥–µ—Ä—ã: 3 —Ç–∏–ø–∞ –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ
‚îú‚îÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤: ‚â•90% (35K ‚Üí 1.5-2K)
‚îî‚îÄ –ü–æ–ª–Ω–æ—Ç–∞ –ø—Ä–∞–≤–∏–ª: 100% (–Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω–æ)
```

---

## üîÑ WORKFLOW –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

### –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ü–ï–†–ï–î –∫–∞–∂–¥—ã–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–æ–ª–∏:**
   ```python
   # –í –Ω–∞—á–∞–ª–µ workflow –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Ä–æ–ª—å
   agent_name = "Payment Integration Agent"
   check_result = await check_agent_refactoring_before_role_switch(agent_name)

   if check_result["action"] == "ask_user":
       # –û–∂–∏–¥–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
       await ask_user_to_create_refactoring_task()
   ```

2. **–ü—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
   - –ü—Ä–æ—á–∏—Ç–∞—Ç—å AGENTS_REFACTORING_CHECKLIST.md
   - –í—ã–±—Ä–∞—Ç—å –∞–≥–µ–Ω—Ç–∞ –∏–∑ –§–∞–∑—ã 1.2
   - –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –ø–æ —à–∞–±–ª–æ–Ω—É –≤—ã—à–µ

3. **–ü—Ä–∏ –æ—Ü–µ–Ω–∫–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—ã:**
   - –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å % —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
   - –û—Ü–µ–Ω–∏—Ç—å —Å—É–º–º–∞—Ä–Ω—É—é —ç–∫–æ–Ω–æ–º–∏—é —Ç–æ–∫–µ–Ω–æ–≤

---

## üí° –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º

```
üìã –ó–∞–¥–∞—á–∞: "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é"
üéØ –ù—É–∂–Ω–∞ —Ä–æ–ª—å: Payment Integration Agent

–®–ê–ì 1: –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞
‚îú‚îÄ await check_agent_refactoring_before_role_switch("Payment Integration Agent")
‚îî‚îÄ –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–ï –†–ï–§–ê–ö–¢–û–†–ï–ù ‚ö†Ô∏è

–®–ê–ì 2: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ "‚ùì –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Payment Integration Agent?"
‚îî‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–¥–∞"

–®–ê–ì 3: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
‚îú‚îÄ await create_agent_refactoring_task("Payment Integration Agent")
‚îî‚îÄ –ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å assignee: Blueprint Architect

–®–ê–ì 4: –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îú‚îÄ "‚úÖ –ó–∞–¥–∞—á–∞ –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–æ–∑–¥–∞–Ω–∞"
‚îú‚îÄ "‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: 4-5 —á–∞—Å–æ–≤"
‚îî‚îÄ "üéØ –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–æ–∫–µ–Ω—ã: 35K ‚Üí 1.5K (95% –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)"
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

```
üìã –ó–∞–¥–∞—á–∞: "–í—ã–±—Ä–∞—Ç—å –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞"

–®–ê–ì 1: –ß–∏—Ç–∞–µ–º —á–µ–∫–ª–∏—Å—Ç
‚îî‚îÄ Read(AGENTS_REFACTORING_CHECKLIST.md)

–®–ê–ì 2: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º
‚îú‚îÄ –§–∞–∑–∞ 1.1: –ó–ê–í–ï–†–®–ï–ù–ê ‚úÖ
‚îî‚îÄ –§–∞–∑–∞ 1.2: 35 –∞–≥–µ–Ω—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã

–®–ê–ì 3: –í—ã–±–∏—Ä–∞–µ–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
‚îú‚îÄ Archon Core Agents (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
‚îÇ   ‚îú‚îÄ [ ] archon_analysis_lead
‚îÇ   ‚îú‚îÄ [ ] archon_implementation_engineer
‚îÇ   ‚îî‚îÄ [ ] archon_quality_guardian
‚îî‚îÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –Ω–∞—á–∞—Ç—å —Å archon_analysis_lead

–®–ê–ì 4: –°–æ–∑–¥–∞—ë–º –∑–∞–¥–∞—á—É
‚îî‚îÄ await create_agent_refactoring_task("archon_analysis_lead")
```

---

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- [‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–æ–¥—É–ª—å: Refactoring Workflow](07_refactoring_workflow.md)
- [‚Üë –ù–∞–∑–∞–¥ –∫ Project Manager Knowledge Base](../archon_project_manager_knowledge.md)
